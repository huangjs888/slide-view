var t={d:function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{f:function(){return J}});class i{constructor(){this.events={},this.events={}}one(t,e,i){const n="function"==typeof e?(...s)=>{e.apply(null,s),this.off(t,n,i)}:e;this.on(t,n,i)}on(t,e,i){const n=this.events[t]||{pool:[],single:-1};if("function"==typeof e)if(i)-1===n.single?n.single=n.pool.push(e)-1:n.pool[n.single]=e;else{let t=!0;for(let i=0,s=n.pool.length;s>i;i++)if(n.pool[i]===e&&i!==n.single){t=!1;break}t&&n.pool.push(e)}else i&&-1!==n.single&&(n.pool.splice(n.single,1),n.single=-1);this.events[t]=n}off(t,e,i){if(void 0===t)this.events={};else if(void 0===e)delete this.events[t];else if(i){const e=this.events[t];e&&-1!==e.single&&(e.pool.splice(e.single,1),e.single=-1)}else{const i=this.events[t];if(i)for(let t=i.pool.length-1;t>=0;t--)if(i.pool[t]===e&&t!==i.single){i.pool.splice(t,1);break}}}emit(t,e){const i=this.events[t];if(i)for(let n=0,s=i.pool.length;s>n;n++){const s=i.pool[n];if("function"==typeof s&&!1===s.call(null,e,t))break}}}function n(t){return t.replace(/([A-Z])/g,"-$1").toLocaleLowerCase()}const s=/^(?:-border(?:-top|-right|-bottom|-left)?(?:-width|)|(?:-margin|-padding)?(?:-top|-right|-bottom|-left)?|(?:-min|-max)?(?:-width|-height))$/;function o(t,e){if(t&&e){let i="";Object.keys(e).forEach((o=>{const r=n(o),a=e[o];if(a||0===a){const t="number"==typeof a&&/^[a-z]/.test(r)&&s.test("-"+r)?"px":"";i+=`${r}: ${a}${t};`}else t.style.removeProperty(r)})),t.style.cssText+=i}return t}function r(t,e){return t&&e&&(Array.isArray(e)?e:e.split(" ")).forEach((e=>e&&t.classList.add(e))),t}function a(t){let e=t;return"string"==typeof t&&(e=document.querySelector(t)),"function"==typeof t&&(e=t()),e||null}function h(t,e,i,s){var h;let l,p,c,u;"string"==typeof t?(l=t,p=e||{},c=Array.isArray(i)?i:[i],u=s):(l="div",p=t||{},c=Array.isArray(e)?e:[e],u=i);const d=o(r(document.createElement(l),p.className),p.style),m=p.attrs||{};return Object.keys(m).forEach((t=>{"innerHTML"!==t&&"className"!==t&&"style"!==t&&d.setAttribute(n(t),m[t])})),c.forEach((t=>{t instanceof Element?null==d||d.appendChild(t):d&&null!=t&&(d.innerHTML=t+"")})),null==(h=a(u))||h.appendChild(d),d}class l{constructor(){this.events={},this.events={}}one(t,e,i){const n="function"==typeof e?(...s)=>{e.apply(null,s),this.off(t,n,i)}:e;this.on(t,n,i)}on(t,e,i){const n=this.events[t]||{pool:[],single:-1};if("function"==typeof e)if(i)-1===n.single?n.single=n.pool.push(e)-1:n.pool[n.single]=e;else{let t=!0;for(let i=0,s=n.pool.length;s>i;i++)if(n.pool[i]===e&&i!==n.single){t=!1;break}t&&n.pool.push(e)}else i&&-1!==n.single&&(n.pool.splice(n.single,1),n.single=-1);this.events[t]=n}off(t,e,i){if(void 0===t)this.events={};else if(void 0===e)delete this.events[t];else if(i){const e=this.events[t];e&&-1!==e.single&&(e.pool.splice(e.single,1),e.single=-1)}else{const i=this.events[t];if(i)for(let t=i.pool.length-1;t>=0;t--)if(i.pool[t]===e&&t!==i.single){i.pool.splice(t,1);break}}}emit(t,e){const i=this.events[t];if(i)for(let n=0,s=i.pool.length;s>n;n++){const s=i.pool[n];if("function"==typeof s&&!1===s.call(null,e,t))break}}}const p=(t,e)=>{let i=t;for(;i&&i!==e;)i=i.parentNode;return!!i};function c(t,e,i){return"number"!=typeof t||i>t?e:t}function u(t,e=!1){if(t.touches){if(e){const e=Array.prototype.filter.call(t.touches,(e=>p(e.target,t.currentTarget))).map((t=>({pageX:t.pageX,pageY:t.pageY,identifier:t.identifier})));return{points:e,isFirst:t.changedTouches.length===e.length}}return{points:Array.prototype.slice.call(t.changedTouches||[]).map((t=>({pageX:t.pageX,pageY:t.pageY,identifier:t.identifier})))}}return{points:[{pageX:t.pageX,pageY:t.pageY,identifier:-1}],isFirst:e}}function d([t,e],[i,n]){return"number"==typeof t&&"number"==typeof i&&"number"==typeof e&&"number"==typeof n?Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)):0}function m([t,e],[i,n]){return"number"==typeof t&&"number"==typeof i&&"number"==typeof e&&"number"==typeof n?180*Math.atan2(n-e,i-t)/Math.PI:0}function f([t,e],[i,n]){const s="number"==typeof t&&"number"==typeof e,o="number"==typeof i&&"number"==typeof n;return s||o?s&&!o?[t,e]:!s&&o?[i,n]:[(t+i)/2,(e+n)/2]:[0,0]}function _([t,e],[i,n]){if("number"==typeof t&&"number"==typeof i&&"number"==typeof e&&"number"==typeof n){const s=t-i,o=e-n;if(s!==o)return Math.abs(o)>Math.abs(s)?e-n>0?"Up":"Down":t-i>0?"Left":"Right"}return"None"}let g=class extends l{constructor(t){super(),this.wheelDelay=350,this.longTapInterval=750,this.doubleTapInterval=250,this.doubleTapDistance=30,this.touchMoveDistance=3,this.swipeVelocity=.3,this.swipeDuration=100,this.raiseDuration=100,this._rotateAngle=0,this._singleTapTimer=0,this._longTapTimer=0,this._wheelTimerEnd=null,this._preventTap=!0,this._swipePoints=null,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._firstPointer=null,this._pointer0=null,this._pointer1=null,this.resetOptions(t)}resetOptions(t){const{wheelDelay:e,longTapInterval:i,doubleTapInterval:n,doubleTapDistance:s,touchMoveDistance:o,swipeVelocity:r,swipeDuration:a,raiseDuration:h}=t||{};this.wheelDelay=c(e,350,1),this.longTapInterval=c(i,750,1),this.doubleTapInterval=c(n,250,1),this.doubleTapDistance=c(s,30,1),this.touchMoveDistance=c(o,3,0),this.swipeVelocity=c(r,.3,0),this.swipeDuration=c(a,100,1),this.raiseDuration=c(h,100,1)}preventAllTap(t=!0){this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,t&&(this._firstPointer=null),this._longTapTimer&&(clearTimeout(this._longTapTimer),this._longTapTimer=0)}};function v(){this.nativeEvent||(this.preventDefault?this.preventDefault():this.returnValue=!1)}function b(){this.stopPropagation?this.stopPropagation():this.cancelBubble=!0}function w(){this.nativeEvent?this.nativeEvent.stopImmediatePropagation&&this.nativeEvent.stopImmediatePropagation():this.stopImmediatePropagation?this.stopImmediatePropagation():b.call(this)}function y(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],preventDefault:v.bind(t),stopPropagation:b.bind(t),stopImmediatePropagation:w.bind(t)},{points:i,isFirst:n}=u(t,!0);n?(this._wheelTimerEnd&&(clearTimeout(this._wheelTimerEnd.timer),this._wheelTimerEnd.wheelEnd(),this._wheelTimerEnd=null),this._pointer0=null,this._pointer1=null):(this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1));for(let t=0,e=i.length;e>t;++t){const e=i[t],n=[e.pageX,e.pageY],s={start:n,previous:n,current:n,identifier:e.identifier,changed:!0};this._pointer0?this._pointer1||this._pointer0.identifier===e.identifier||(this._pointer1=s):this._pointer0=s}this.preventAllTap(!1),this._swipePoints=null,this._rotateAngle=0;const s=this._pointer0,o=this._pointer1;if(o&&s)this._firstPointer=null,e.pointers=[s,o],e.getPoint=()=>f(s.current,o.current),this.emit("gestureStart",e);else{if(!s)return;{e.pointers=[s],e.getPoint=()=>s.current,this._preventTap=!1,this._longTapTimer=+setTimeout((()=>{this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._longTapTimer=0,this._firstPointer=null,e.waitTime=this.longTapInterval,this.emit("longTap",e)}),this.longTapInterval);const t=this._firstPointer,i=this._singleTapTimer;i&&t&&d(t.current,s.current)<this.doubleTapDistance?(clearTimeout(i),this._singleTapTimer=0,this._preventSingleTap=!0,this._preventDoubleTap=!1,e.getPoint=()=>t.current):(this._firstPointer=s,this._preventSingleTap=!1,this._preventDoubleTap=!0)}}this.emit("pointerStart",e)}function T(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],preventDefault:v.bind(t),stopPropagation:b.bind(t),stopImmediatePropagation:w.bind(t)};this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);const{points:i}=u(t);for(let t=0,e=i.length;e>t;++t){const e=i[t],n=[e.pageX,e.pageY];this._pointer0&&this._pointer0.identifier===e.identifier?(this._pointer0.changed=!0,this._pointer0.previous=this._pointer0.current,this._pointer0.current=n):this._pointer1&&this._pointer1.identifier===e.identifier&&(this._pointer1.changed=!0,this._pointer1.previous=this._pointer1.current,this._pointer1.current=n)}const n=this._pointer0,s=this._pointer1;if(n&&d(n.start,n.current)>this.touchMoveDistance||s&&d(s.start,s.current)>this.touchMoveDistance){if(this.preventAllTap(),s&&n){e.pointers=[n,s];const{start:t,previous:i,current:o}=n,{start:r,previous:a,current:h}=s,l=f(o,h),p=f(i,a),c=f(t,r);e.getPoint=t=>"start"===t?c:"previous"===t?p:l,e.direction=_(p,l),e.moveDirection=_(c,l),e.deltaX=l[0]-p[0],e.moveX=l[0]-c[0],e.deltaY=l[1]-p[1],e.moveY=l[1]-c[1];const u=d(o,h),g=d(i,a),v=d(t,r);v>0&&u>0&&g>0&&(e.scale=u/g,e.moveScale=u/v);let b=m(o,h)-m(i,a);-180>b?b+=360:b>180&&(b-=360),e.angle=b,this._rotateAngle+=b,e.moveAngle=this._rotateAngle,this.emit("rotate",e),v>0&&u>0&&g>0&&this.emit("scale",e),this.emit("multiPan",e),this.emit("gestureMove",e)}else{if(!n)return;{e.pointers=[n];const{start:t,previous:i,current:s}=n;e.getPoint=e=>"start"===e?t:"previous"===e?i:s,e.direction=_(i,s),e.moveDirection=_(t,s),e.deltaX=s[0]-i[0],e.moveX=s[0]-t[0],e.deltaY=s[1]-i[1],e.moveY=s[1]-t[1];const o=Date.now(),r=this._swipePoints||[[],[]];o-((r[1][0]?r[1][0].timestamp:0)||0)>this.swipeDuration&&(r[0]=r[1],r[1]=[]),r[1].push({point:s,timestamp:o}),this._swipePoints=r,this.emit("pan",e)}}this.emit("pointerMove",e)}}function E(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],preventDefault:v.bind(t),stopPropagation:b.bind(t),stopImmediatePropagation:w.bind(t)};let i=null,n=null;this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);const{points:s}=u(t);for(let t=0,e=s.length;e>t;++t){const e=s[t];this._pointer0&&this._pointer0.identifier===e.identifier?(this._pointer0.changed=!0,i=this._pointer0,this._pointer0=null):this._pointer1&&this._pointer1.identifier===e.identifier&&(this._pointer1.changed=!0,n=this._pointer1,this._pointer1=null)}if(this._pointer1&&!this._pointer0&&(this._pointer0=this._pointer1,this._pointer1=null,n=i,i=null),this._longTapTimer&&(clearTimeout(this._longTapTimer),this._longTapTimer=0),this._pointer0){e.pointers=[this._pointer0],this._pointer1?e.pointers.push(this._pointer1):n&&(e.leavePointers=[n],this._rotateAngle=0);const t=f(this._pointer0.start,this._pointer1?this._pointer1.start:n?n.start:[]),i=f(this._pointer0.previous,this._pointer1?this._pointer1.previous:n?n.previous:[]),s=f(this._pointer0.current,this._pointer1?this._pointer1.current:n?n.current:[]);e.getPoint=e=>"start"===e?t:"previous"===e?i:s,this.emit("gestureEnd",e)}else if(i){e.leavePointers=[i],n&&e.leavePointers.push(n);const t=n?f(i.start,n.start):i.start,s=n?f(i.previous,n.previous):i.previous,a=n?f(i.current,n.current):i.current;if(e.getPoint=e=>"start"===e?t:"previous"===e?s:a,this._preventTap||(this.emit("tap",e),this._preventTap=!0),this._preventSingleTap||(this._singleTapTimer=+setTimeout((()=>{this._singleTapTimer=0,e.delayTime=this.doubleTapInterval,this.emit("singleTap",e)}),this.doubleTapInterval),this._preventSingleTap=!0),!this._preventDoubleTap){const t=this._firstPointer;t&&(e.getPoint=()=>t.current),e.intervalTime=this.doubleTapInterval,this.emit("doubleTap",e),this._firstPointer=null,this._preventDoubleTap=!0}if(this._swipePoints){const[t,i]=this._swipePoints,n=i[i.length-1];if(Date.now()-n.timestamp<=this.raiseDuration){let s=i[0];for(let e=t.length-1;e>=0&&n.timestamp-t[e].timestamp<=this.swipeDuration;e--)s=t[e];const a=(o=n.timestamp-s.timestamp,"number"!=typeof(r=d(s.point,n.point))||0===r||"number"!=typeof o||0===o?0:r/o);if(a>this.swipeVelocity){const t=m(s.point,n.point);e.direction=_(s.point,n.point),e.angle=t,e.velocity=a,e.swipeComputed=(e,i=a)=>{let n=0,s=0,o=0;e>1?(n=e,s=i/n,o=i*n/2):e>0&&(s=e,n=i/s,o=i*i/(2*s));const[r,h]=function(t,e){if("number"!=typeof t||"number"!=typeof e)return[0,0];const i=e*Math.PI/180;return[t*Math.cos(i),t*Math.sin(i)]}(o,t);return{duration:n,stretchX:r,stretchY:h,deceleration:s}},this.emit("swipe",e),this._swipePoints=null}}}}var o,r;this.emit("pointerEnd",e)}function P(t){this.emit("pointerCancel",{sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],preventDefault:v.bind(t),stopPropagation:b.bind(t),stopImmediatePropagation:w.bind(t)}),E.call(this,t)}function M(t){const e=this;function i(){"undefined"!=typeof window&&(window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",r),window.removeEventListener("blur",s),window.removeEventListener("dragstart",n),"onselectstart"in window.document.documentElement&&window.removeEventListener("selectstart",n))}function n(t){t.preventDefault()}function s(t){n(t),i()}function o(i){if(0===t.button)T.call(e,i);else{const n={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],preventDefault:v.bind(t),stopPropagation:b.bind(t),stopImmediatePropagation:w.bind(t)},s=[i.pageX,i.pageY];if(e._pointer0){e._pointer0.previous=e._pointer0.current,e._pointer0.current=s,n.pointers=[e._pointer0];const{start:t,previous:i,current:o}=e._pointer0;n.getPoint=e=>"start"===e?t:"previous"===e?i:o,n.direction=_(i,o),n.moveDirection=_(t,o),n.deltaX=o[0]-i[0],n.moveX=o[0]-t[0],n.deltaY=o[1]-i[1],n.moveY=o[1]-t[1],n.angle=n.deltaX/4,n.moveAngle=n.moveX/4,e.emit("rotate",n)}}}function r(n){if(i(),0===t.button)E.call(e,n);else{const i={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],preventDefault:v.bind(t),stopPropagation:b.bind(t),stopImmediatePropagation:w.bind(t)},s=[n.pageX,n.pageY];if(e._pointer0){const t=e._pointer0;e._pointer0=null,t.previous=t.current,t.current=s,i.leavePointers=[t];const{start:n,previous:o,current:r}=t;i.getPoint=t=>"start"===t?n:"previous"===t?o:r}i.angle=NaN,e.emit("rotate",i)}}if("undefined"!=typeof window&&(window.addEventListener("mousemove",o,{capture:!1,passive:!1}),window.addEventListener("mouseup",r,{capture:!1,passive:!1}),window.addEventListener("blur",s,{capture:!0,passive:!1}),window.addEventListener("dragstart",n,{capture:!0,passive:!1}),"onselectstart"in window.document.documentElement&&window.addEventListener("selectstart",n,{capture:!0,passive:!1})),0===t.button)y.call(e,t);else{e._wheelTimerEnd&&(clearTimeout(e._wheelTimerEnd.timer),e._wheelTimerEnd.wheelEnd(),e._wheelTimerEnd=null);const i=[t.pageX,t.pageY];e._pointer0={start:i,previous:i,current:i,identifier:-1,changed:!0}}}function x(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],preventDefault:v.bind(t),stopPropagation:b.bind(t),stopImmediatePropagation:w.bind(t)},i=[t.pageX,t.pageY];this._wheelTimerEnd?(this._pointer0&&(this._pointer0.previous=this._pointer0.current,this._pointer0.current=i),clearTimeout(this._wheelTimerEnd.timer)):this._pointer0={start:i,previous:i,current:i,identifier:-1,changed:!0};const n=()=>{this._pointer0=null,this._wheelTimerEnd=null,e.timestamp=Date.now(),e.scale=NaN,this.emit("scale",e)};if(this._wheelTimerEnd={wheelEnd:n,timer:+setTimeout(n,this.wheelDelay),scale:this._wheelTimerEnd?this._wheelTimerEnd.scale:1},this._pointer0){e.pointers=[this._pointer0];const{start:i,previous:n,current:s}=this._pointer0;e.getPoint=t=>"start"===t?i:"previous"===t?n:s;const o=Math.pow(2,-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002));this._wheelTimerEnd.scale*=o,e.moveScale=this._wheelTimerEnd.scale,e.scale=o,this.emit("scale",e)}}class A extends g{constructor(t,e){super(e),this.element=null,this._unbind=null;const i=function(t){let e=t;return"string"==typeof t&&(e=document.querySelector(t)),"function"==typeof t&&(e=t()),e||null}(t);if(!i)throw Error("Please pass in a valid element...");if(this.element=i,window.navigator.maxTouchPoints||"ontouchstart"in window.document){const t=y.bind(this),e=T.bind(this),n=E.bind(this),s=P.bind(this);i.addEventListener("touchstart",t,{capture:!1,passive:!1}),i.addEventListener("touchmove",e,{capture:!1,passive:!1}),i.addEventListener("touchend",n,{capture:!1,passive:!1}),i.addEventListener("touchcancel",s,{capture:!1,passive:!1}),this._unbind=()=>{i.removeEventListener("touchstart",t),i.removeEventListener("touchmove",e),i.removeEventListener("touchend",n),i.removeEventListener("touchcancel",s)}}else{const t=M.bind(this),e=x.bind(this);i.addEventListener("mousedown",t,{capture:!1,passive:!1}),i.addEventListener("wheel",e,{capture:!1,passive:!1}),this._unbind=()=>{i.removeEventListener("mousedown",t),i.removeEventListener("wheel",e)}}}destory(){super.off(),this._unbind&&(this._unbind(),this._unbind=null,this.element=null)}}function D(t){if(t){if(t.match(/\.(jpe?g|png|gif|bmp|ico|svg|webp)$/)||t.match(/^(data:image\/)/))return"img";if(t.match(/^<svg(.+)?>.+<\/svg>$/))return"span"}return"i"}function j(t,e){let i=t.target;for(;e(i);)i=i.parentNode;return i}function L(t){const{element:e,contentEl:i,_translate:n}=this,{sourceEvent:s}=t,o=j(s,(t=>t!==e&&t!==i));i&&o===i&&(0===n?this.emit("longPress",{currentTarget:i,timestamp:Date.now(),sourceEvent:t}):this.hide())}function N(){return N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},N.apply(this,arguments)}const $=function(t,e=0){const{contentEl:i,leftActions:n,rightActions:s,duration:r,timing:a}=this;if(!i||(!n||n.disable)&&(!s||s.disable))return;const h=r<=0?"":`transform ${r}s ${a} 0s`,{index:l,direction:p}=t,c=0===this._translate?0:this._translate/Math.abs(this._translate),u=({style:t,items:n})=>{let s=0;"drawer"===t&&(s=-this._translate);let r=0;for(let t=n.length-1;t>=0;t--){const{wrapper:a,width:p,gap:u}=n[t];if(1===n.length&&o(i,{transform:`translate3d(${0!==e?e:this._translate}px, 0, 0)`,transition:h}),t===l){let t=0;t=0!==e?e:(p+u[1]+r)*c,o(a,{transform:`translate3d(${t+s}px, 0, 0)`,transition:h})}else if(t>l){let t=0;0===e&&(t=(p+u[1]+r)*c),o(a,{transform:`translate3d(${t+s}px, 0, 0)`,transition:h})}r+=p+u[0]+u[1]}};"left"===p&&n&&!n.disable&&u(n),"right"===p&&s&&!s.disable&&u(s)},I=function(t,e=this.duration){const{leftEl:i,rightEl:n,contentEl:s,leftActions:r,rightActions:a,timing:h}=this;if(!i||!n||!s||(!r||r.disable)&&(!a||a.disable))return;let l=0;const p=e<=0?"":`transform ${e}s ${h} 0s`,c=e<=0?"":`width ${e}s ${h} 0s, transform ${e}s ${h} 0s`,u=({style:e,items:i,element:n,width:s,gap:r})=>{let a={},h=t,u=0;"drawer"===e&&(o(n,{width:Math.max(Math.abs(t),s),transform:`translate3d(${t}px, 0, 0)`,transition:c}),h=l*Math.max(s,Math.abs(t)),u=-t);let d=0;const m=i.length-1;for(let e=m;e>=0;e--){const{wrapper:n,width:f,gap:_,fixedGap:g}=i[e],v=f/(s-r)*(h-l*r),b=v+l*_[1],w=b+d;g&&"100%"!==n.style.width&&(a={width:Math.max(Math.abs(v),f),transition:c}),o(n,N({transform:`translate3d(${(e===m&&this._overshooting?t:w)+u}px, 0, 0)`,transition:p},a)),d+=b+l*_[0]}};window.requestAnimationFrame((()=>{this.emit("transform",{currentTarget:s,timestamp:Date.now(),sourceEvent:null,data:{translate:t}}),o(s,{transform:`translate3d(${t}px, 0, 0)`,transition:p}),r&&!r.disable&&(l=1,u(r)),a&&!a.disable&&(l=-1,u(a))}))},S=function(t){t&&!t.disable&&o(t.items[t.items.length-1].wrapper,{width:this._overshooting?"100%":""})},O=["wrapper","element","confirm"],X=function(t,e=!1){const{wrapper:i,element:n,confirm:s={}}=t,a=function(t,e){if(null==t)return{};var i,n,s={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,O);let{text:h,icon:l,color:p,background:c,className:u}=a;if(e&&(l=l&&(s.icon||l),h=h&&(s.text||h),p=p&&(s.color||p),c=c&&(s.background||c),u=u&&(s.className||u)),o(i,{background:c||"",color:p||""}),r(function(t,e){return t&&e&&(Array.isArray(e)?e:e.split(" ")).forEach((e=>e&&t.classList.remove(e))),t}(n,e?a.className||"":s.className||a.className||""),u||""),l){const t=n.firstElementChild,e=D(l);"img"===e?t.src=l:"i"===e?t.className=l:t.innerHTML=l}h&&(n.lastElementChild.innerText=h)},Y=function(){if(this._confirming){const{index:t,direction:e}=this._confirming,i="left"===e?this.leftActions:"right"===e?this.rightActions:null;if(i&&!i.disable){const e=i.items[t];o(e.element,{width:""}),X(e)}this._confirming=null}};function C(t,e){const{element:i,leftActions:n,rightActions:s,rebounce:r}=this;if(0===this._translate||!i||(!n||n.disable)&&(!s||s.disable))return;const{sourceEvent:a}=t,h=j(a,(t=>t!==i&&!t.getAttribute("data-index"))),l=+(h.getAttribute("data-index")||-1),p="left"===e?n:s;if(l<0||!p||p.disable)return;const c=this._width,u=this._translate/Math.abs(this._translate),d={index:l,direction:e},m=p.items[l],f=l===p.items.length-1&&p.overshoot;let _="buttonPress";if(this._confirming&&this._confirming.index===l&&this._confirming.direction===e)f?(X(m),this._confirming=null):m.collapse?this.hide():(o(m.element,{width:""}),$.apply(this,[d]),X(m),this._confirming=null);else if(f){if(!this._overshooting){this._overshooting=!0;const t=u*c;this._translate=t,I.apply(this,[t]),S.apply(this,[p])}m.confirm&&(this._confirming=d,X(m,!0),_="buttonConfirm")}else if(m.confirm){let t=this._translate;1===p.items.length&&(t=Math.min(Math.abs(2*t),c)*u),r>0&&0!==l?(B(m.wrapper,(()=>{this._confirming&&this._confirming.index===d.index&&this._confirming.direction===d.direction&&$.apply(this,[d,t])})),$.apply(this,[d,t+r*t/Math.abs(t)])):$.apply(this,[d,t]),o(m.wrapper,{width:""}),o(m.element,{width:Math.abs(t)}),this._confirming=d,X(m,!0),_="buttonConfirm"}else m.collapse&&this.hide();this.emit(_,{index:l,data:m.data,currentTarget:h,timestamp:Date.now(),sourceEvent:t})}function k(t){const{element:e,contentEl:i,leftEl:n,rightEl:s,_translate:o}=this,{sourceEvent:r}=t,a=j(r,(t=>t!==e&&t!==i&&t!==n&&t!==s));i&&a===i?0===o?this.emit("press",{currentTarget:i,timestamp:Date.now(),sourceEvent:t}):this.hide():a===n?C.apply(this,[t,"left"]):a===s&&C.apply(this,[t,"right"])}function z(t){const{element:e,contentEl:i,_translate:n}=this,{sourceEvent:s}=t,o=j(s,(t=>t!==e&&t!==i));i&&o===i&&(0===n?this.emit("doublePress",{currentTarget:i,timestamp:Date.now(),sourceEvent:t}):this.hide())}function F(t,e,i,n=!1){return 1>t||1>e||n&&t>e||0>=i||i>1?t:n?Math.pow((e-1)*t/(e-t),1/i):e/(1+(e-1)/Math.pow(t,i))}function G(t,e={}){if(0===t)return 0;const{max:i=9999,mode:n=0,expo:s=.88}=e;let o=Math.abs(t);return o=1>o?1===n?1/F(1/o,i,s):F(o+1,i,s)-1:F(o,i,s),o*(t>0?1:-1)}function H(t){const{element:e}=this,{pointers:i}=t;if(e&&e.getAttribute("data-identifier"))return;const n=i[0];e&&e.setAttribute("data-identifier",`${n.identifier}`);const s=n.current,{leftActions:o,rightActions:r,friction:a}=this;if((!o||o.disable)&&(!r||r.disable))return;this._isMoving=!0,this._timestamp=0,this._startAngle=0,this._startOffset=this._translate,this._startPoint=s;const h=this._translate>0?o:this._translate<0?r:null;let l=0;if(h&&!h.disable){const{overshoot:t,overshootFreeSize:e,width:i}=h,n=(t?Math.min(this._width,Math.max(this._width-e,i)):i)*this._translate/Math.abs(this._translate);l=Math.abs(this._translate)<=Math.abs(n)?this._translate:function(t,e={}){if(0===t)return 0;const{max:i=9999,mode:n=0,expo:s=.88}=e;let o=Math.abs(t);return o=1>o?1===n?1/F(1/o,i,s,!0):F(o+1,i,s,!0)-1:F(o,i,s,!0),o*(t>0?1:-1)}(this._translate-n,{expo:a})+n}this._startTranslate=l}function R(t){const{element:e}=this,{pointers:i}=t;let n=null;for(let t=0;t<i.length;t++){const s=i[t];if(s.changed&&(!e||`${s.identifier}`===e.getAttribute("data-identifier"))){n=s;break}}if(!n)return;const s=n.current,{leftActions:o,rightActions:r,friction:a}=this;if(!this._isMoving||!this._startPoint||(!o||o.disable)&&(!r||r.disable))return;const h=s[0]-this._startPoint[0],l=s[1]-this._startPoint[1];if(0===this._startAngle&&(this._startAngle=Math.abs(h)-Math.abs(l)<=0?-1:1),1!==this._startAngle||Math.abs(h)<=3)return;let p=0,c=0,u=this._startTranslate+h;const d=u>0?o:u<0?r:null;if(d&&!d.disable){const{overshoot:t,overshootEdgeSize:e,overshootFreeSize:i,width:n}=d,o=u/Math.abs(u),r=o*n,h=o*Math.min(this._width,Math.max(this._width-i,n)),l=o*Math.min(.5*this._width,Math.max(0,e));if(t){if(Math.abs(u)<Math.abs(h)){let t=0,e=!1;const i=s[0]-this._offset,n=this._startPoint[0]-this._offset-this._startOffset,o=.5*this._width;u<0?(t=i-Math.abs(l),e=n>o&&t<0):(t=i-(this._width-Math.abs(l)),e=n<o&&t>0),e&&(u=h+t,this._startPoint=s,this._startTranslate=u)}const t=Date.now();if(Math.abs(u)>=Math.abs(h)){if(!this._overshooting){this._timestamp=t,this._overshooting=!0,S.apply(this,[d]);const e=d.items.length-1,i=d.items[e];i.confirm&&(X(i,!0),this._confirming={index:e,direction:o>0?"left":"right"})}p=G(u-h,{expo:a})+h,c=Math.max(0,this.duration-(t-this._timestamp)/1e3)}else{if(this._overshooting){this._timestamp=t,this._overshooting=!1,S.apply(this,[d]);const e=d.items.length-1,i=d.items[e];i.confirm&&(X(i),this._confirming=null)}p=u,c=Math.max(0,this.duration/2-(t-this._timestamp)/1e3)}}else p=Math.abs(u)>=Math.abs(r)?G(u-r,{expo:a})+r:u;p=Math.min(this._width,Math.max(-this._width,p))}else this._startPoint=s,this._startTranslate=0,p=0;this._translate=p,I.apply(this,[p,c]),this._overshooting||Y.apply(this,[])}function V(t){const{element:e}=this,{leavePointers:i}=t;let n=null;for(let t=0;t<i.length;t++){const s=i[t];if(!e||`${s.identifier}`===e.getAttribute("data-identifier")){n=s;break}}if(!n)return;e&&e.setAttribute("data-identifier","");const s=n.current,{leftActions:o,rightActions:r}=this;if(!this._isMoving||!this._startPoint||1!==this._startAngle||(!o||o.disable)&&(!r||r.disable))return;this._isMoving=!1;const a=this._startPoint,h=s[0]-a[0];if(0===this._translate||Math.abs(h)<=3)return;const l=this._translate>0?o:this._translate<0?r:null;if(l&&!l.disable){if(this._overshooting){const e=l.items.length-1,i=l.items[e],n=this._translate*this._width/Math.abs(this._translate);return this._translate=n,I.apply(this,[n]),void this.emit(i.confirm?"buttonConfirm":"buttonPress",{index:e,data:i.data,currentTarget:i.wrapper,timestamp:Date.now(),sourceEvent:t})}if(this._translate>0&&h<0||this._translate<0&&h>0||Math.abs(this._translate)<l.threshold)return void this.hide()}this.show(this._translate>0?"left":"right")}function q(t){const e=new A(t);return e.on("pointerStart",H.bind(this)),e.on("pointerMove",R.bind(this)),e.on("pointerEnd",V.bind(this)),e.on("tap",k.bind(this)),e.on("longTap",L.bind(this)),e.on("doubleTap",z.bind(this)),e}function B(t,e,i="transform"){return t&&(t.ontransitionend=n=>{n.stopImmediatePropagation(),n.target===t&&n.propertyName===i&&(t.ontransitionend=null,e(n))}),t}const U=["element","gap","fixedGap"];function Z(){return Z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Z.apply(this,arguments)}!function(t,e){let i=document.querySelector("#"+t);i||(i=document.createElement("style"),i.id=t,i.appendChild(document.createTextNode("\n.hjs-slideview {\n  position: relative;\n  overflow: hidden;\n}\n.hjs-slideview__content {\n  position: relative;\n  z-index: 10;\n  width: 100%;\n  height: 100%;\n}\n.hjs-slideview__left,\n.hjs-slideview__right,\n.hjs-slideview__actions,\n.hjs-slideview__action__wrapper {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n}\n.hjs-slideview__left {\n  right: 100%;\n  left: auto;\n  justify-content: flex-end;\n}\n.hjs-slideview__left .hjs-slideview__action__wrapper {\n  right: 0;\n  left: auto;\n  justify-content: flex-end;\n}\n.hjs-slideview__right {\n  right: auto;\n  left: 100%;\n  justify-content: flex-start;\n}\n.hjs-slideview__right .hjs-slideview__action__wrapper {\n  right: auto;\n  left: 0;\n  justify-content: flex-start;\n}\n.hjs-slideview__action {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  max-width: 100%;\n  height: 100%;\n  padding: 0 16px;\n  cursor: pointer;\n}\n.hjs-slideview__action__icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  text-align: center;\n}\n.hjs-slideview__action__text {\n  width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-align: center;\n  text-overflow: ellipsis;\n}\n")),(document.head||document.getElementsByTagName("head")[0]).appendChild(i))}("hjs-slide-view-style");var J=class extends i{constructor(t){super(),this.element=null,this.contentEl=null,this.leftEl=null,this.rightEl=null,this.leftActions=null,this.rightActions=null,this.friction=.5,this.rebounce=12,this.duration=.4,this.timing="ease",this._destory=!1,this._direction="none",this._confirming=null,this._overshooting=!1,this._translate=0,this._width=0,this._offset=0,this._startOffset=0,this._startTranslate=0,this._startPoint=null,this._startAngle=0,this._timestamp=0,this._isMoving=!1;const{className:e,container:i,content:n,friction:s,rebounce:o,duration:r,timing:l,leftActions:p,rightActions:c}=t,u=a(i);if(!u)throw new Error("Please pass in a valid container element...");const d=this.element=h({className:["hjs-slideview",e||""]},[this.leftEl=h({className:"hjs-slideview__left"}),this.rightEl=h({className:"hjs-slideview__right"}),this.contentEl=h({className:"hjs-slideview__content"})],u),m=q.apply(this,[d]);this.setContent(n),this.setFriction(s),this.setRebounce(o),this.setDuration(r),this.setTiming(l),this.setActions(p,"left"),this.setActions(c,"right");const f=t=>{let e=0,i=0;const n=t.items.map((t=>{let{element:n,gap:s,fixedGap:o}=t,r=function(t,e){if(null==t)return{};var i,n,s={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,U);const{width:a}=n.getBoundingClientRect();let[h,l]=s;return h=Math.min(a,Math.max(h,0)),l=Math.min(a,Math.max(l,0)),e+=a+h+l,i+=h+l,Z({},r,{element:n,width:a,gap:[h,l],fixedGap:(0!==h||0!==l)&&o})}));return Z({},t,{threshold:Math.min(e,Math.max(t.threshold,0)),width:e,gap:i,items:n})},_=()=>{const{width:t,left:e}=d.getBoundingClientRect();this._width=t,this._offset=e,this.leftActions&&(this.leftActions=f(this.leftActions)),this.rightActions&&(this.rightActions=f(this.rightActions))};window.addEventListener("resize",_),this._unbind=()=>{m.destory(),window.removeEventListener("resize",_)},_()}setContent(t,e){if(this._destory||!this.contentEl)return;if(e&&"string"==typeof t)return void(this.contentEl.innerHTML=t);const i=a(t);i&&(this.contentEl.innerHTML="",this.contentEl.appendChild(i))}setFriction(t=.5){this._destory||"number"==typeof t&&(this.friction=Math.min(1,Math.max(0,t)))}setRebounce(t=12){this._destory||"number"==typeof t&&(this.rebounce=Math.max(0,t))}setDuration(t=.4){this._destory||"number"==typeof t&&(this.duration=Math.max(0,t))}setTiming(t="ease"){this._destory||(this.timing=t)}setDisable(t=!0,e="both"){this._destory||"boolean"==typeof t&&this.hide().then((()=>{!this.leftActions||"both"!==e&&"left"!==e||(this.leftActions.disable=t),!this.rightActions||"both"!==e&&"right"!==e||(this.rightActions.disable=t)}))}setOvershoot(t=!0,e="both"){this._destory||"boolean"==typeof t&&(!this.leftActions||"both"!==e&&"left"!==e||(this.leftActions.overshoot=t),!this.rightActions||"both"!==e&&"right"!==e||(this.rightActions.overshoot=t))}setThreshold(t=40,e="both"){if(!this._destory&&"number"==typeof t){const i=Math.max(0,t);!this.leftActions||"both"!==e&&"left"!==e||(this.leftActions.threshold=Math.min(i,this.leftActions.width)),!this.rightActions||"both"!==e&&"right"!==e||(this.rightActions.threshold=Math.min(i,this.rightActions.width))}}setActions(t={},e="both"){if(this._destory||"none"===e)return;const i=e=>{const i=this[`${e}El`];if(i&&(i.innerHTML="",this[`${e}Actions`]=null,t.items&&t.items.length>0)){const{className:n,style:s="accordion",disable:o=!1,overshoot:r=!1,overshootEdgeSize:a=80,overshootFreeSize:l=30,threshold:p=40,items:c}=t,u=h({className:["hjs-slideview__actions",n||""]},null,i);let d=0,m=0;const f=c.map(((t,e)=>{const{gap:i=0,fixedGap:n=!1,text:s,icon:o}=t,r=h({className:"hjs-slideview__action",attrs:{dataIndex:String(e)}},[o?h(D(o),{className:"hjs-slideview__action__icon"}):null,s?h("span",{className:"hjs-slideview__action__text"}):null]),a=Z({},t,{wrapper:h({className:"hjs-slideview__action__wrapper"},r,u),element:r,width:0,gap:[0,0],fixedGap:n});X(a);const{width:l}=r.getBoundingClientRect();let p=0,c=0;return"number"==typeof i?(p=i,c=i):[p,c]=i,p=Math.min(l,Math.max(p,0)),c=Math.min(l,Math.max(c,0)),d+=l+p+c,m+=p+c,Z({},a,{gap:[p,c],fixedGap:(0!==p||0!==c)&&n,width:l})}));this[`${e}Actions`]={style:s,disable:o,overshoot:r,overshootFreeSize:l,overshootEdgeSize:a,threshold:Math.min(d,Math.max(p,0)),element:u,width:d,gap:m,items:f}}},n=t=>{this.hide().then((()=>{i(t),this.show(t)}))},s=this._translate>0?"left":this._translate<0?"right":"none";"both"===e?("none"!==s&&n(s),"left"!==s&&i("left"),"right"!==s&&i("right")):s===e?n(e):i(e)}toggle(t="right"){return 0===this._translate?this.show(t):this.hide()}show(t="right"){const{contentEl:e,rebounce:i,leftActions:n,rightActions:s}=this;return!this._destory&&e&&(n&&!n.disable||s&&!s.disable)?new Promise((o=>{let r=t;n&&!n.disable||(r="right"),s&&!s.disable||(r="left");const a="left"===r?n:s,h="left"===r?1:-1,l=a?a.width*h:0;if(this._translate===l)return this.emit("show",{direction:r,currentTarget:e,timestamp:Date.now(),sourceEvent:null}),this._direction=r,void o();const p=(t=0)=>{const i=l+t;this._translate=i,I.apply(this,[i]),this._overshooting&&(this._overshooting=!1,S.apply(this,[this._translate>0?n:s])),Y.apply(this,[]),t||B(e,(()=>{o(),this.emit("show",{direction:r,currentTarget:e,timestamp:Date.now(),sourceEvent:null}),this._direction=r}))};i>0&&(l>0&&this._translate<l||l<0&&this._translate>l)?(B(e,(()=>p())),p(i*h)):p()})):Promise.resolve()}hide(){const{contentEl:t,leftActions:e,rightActions:i}=this;return!this._destory&&t&&(e&&!e.disable||i&&!i.disable)?new Promise((n=>{if(0===this._translate)return this.emit("hide",{direction:"none",currentTarget:t,timestamp:Date.now(),sourceEvent:null}),this._direction="none",void n();this._translate=0,I.apply(this,[0]),B(t,(()=>{n(),this._overshooting&&(this._overshooting=!1,S.apply(this,[this._translate>0?e:i])),Y.apply(this,[]),this.emit("hide",{direction:"none",currentTarget:t,timestamp:Date.now(),sourceEvent:null}),this._direction="none"}))})):Promise.resolve()}destory(){super.off(),this._unbind&&(this._unbind(),this._unbind=null),this._destory=!0,this.leftActions=null,this.rightActions=null,this._confirming=null,this._startPoint=null,this.contentEl=null,this.leftEl=null,this.rightEl=null,this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null)}},K=e.f;export{K as SlideView};
//# sourceMappingURL=slide-view.min.js.map