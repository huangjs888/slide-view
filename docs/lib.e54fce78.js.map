{"version":3,"file":"lib.e54fce78.js","mappings":"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","sources":["webpack:///../src/event.ts","webpack:///../src/util.ts","webpack:///../src/gesture.ts","webpack:///../src/agent.ts","webpack:///../src/index.ts","webpack:///../src/css.ts"],"sourcesContent":["/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-03-07 13:48:11\n * @Description: ******\n */\nexport type IBaseEvent<O, E> = {\n  currentTarget: O; // 事件绑定元素\n  sourceEvent: E; // 源事件\n  timeStamp: number; // 事件发生时间戳\n};\ntype IHandler<E, T> = (this: any, event: E, type?: T) => void;\n\nexport default class EventTarget<\n  O,\n  K,\n  T extends string,\n  E extends IBaseEvent<O, K>,\n> {\n  events: {\n    [key in T]?: Array<IHandler<E, T>>;\n  } = {};\n  constructor() {\n    this.events = {};\n  }\n  once(type: T, handler: IHandler<E, T>) {\n    const onceHandler = (...args: [E, T?]) => {\n      handler.apply(this, args);\n      this.off(type, onceHandler);\n    };\n    this.on(type, onceHandler);\n  }\n  on(type: T, handler: IHandler<E, T>) {\n    const eventPool = this.events[type] || [];\n    eventPool.push(handler);\n    this.events[type] = eventPool;\n  }\n  off(type?: T, handler?: IHandler<E, T>) {\n    if (!type) {\n      this.events = {};\n    } else if (handler) {\n      const eventPool = this.events[type] || [];\n      for (let i = eventPool.length; i >= 0; i--) {\n        if (eventPool[i] === handler) {\n          eventPool.splice(i, 1);\n        }\n      }\n      this.events[type] = eventPool;\n    } else {\n      this.events[type] = [];\n    }\n  }\n  trigger(type: T, event: E) {\n    const eventPool = this.events[type] || [];\n    for (let i = 0, len = eventPool.length; i < len; i++) {\n      var handler = eventPool[i];\n      if (typeof handler === 'function') {\n        handler.apply(event.currentTarget, [event, type]);\n      }\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-03-06 17:20:57\n * @Description: ******\n */\n\nexport function isTouchable(ele: HTMLElement) {\n  if (!ele) {\n    return false;\n  }\n  return navigator.maxTouchPoints || 'ontouchstart' in ele;\n}\n\nexport function getDistance([x0, y0]: number[], [x1, y1]: number[]) {\n  return Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n}\n\nexport function getVelocity(deltaTime: number, distance: number) {\n  return distance / deltaTime || 0;\n}\n\nexport function getAngle([x0, y0]: number[], [x1, y1]: number[]) {\n  return (Math.atan2(y1 - y0, x1 - x0) * 180) / Math.PI;\n}\n\nexport function getCenter([x0, y0]: number[], [x1, y1]: number[]) {\n  return [(x0 + x1) / 2, (y0 + y1) / 2];\n}\n\nexport function getDirection([x0, y0]: number[], [x1, y1]: number[]) {\n  const x = x0 - x1;\n  const y = y0 - y1;\n  if (x === y) {\n    return 'None';\n  }\n  return Math.abs(x) >= Math.abs(y)\n    ? x0 - x1 > 0\n      ? 'Left'\n      : 'Right'\n    : y0 - y1 > 0\n    ? 'Up'\n    : 'Down';\n}\n\nexport function rebounceSize(value: number) {\n  return Math.pow(Math.abs(value || 1), 0.6) * (value > 0 ? 1 : -1);\n}\n\nexport function addClass(ele: HTMLElement, className: string) {\n  if (ele && typeof className === 'string') {\n    className.split(' ').forEach((c) => c && ele.classList.add(c));\n  }\n  return ele;\n}\n\nexport function setStyle(\n  ele: HTMLElement,\n  css: { [key: string]: string | number | undefined },\n) {\n  if (ele) {\n    Object.keys(css).forEach((k: string) => {\n      if (typeof css[k] === 'undefined') {\n        return;\n      }\n      const key =\n        k.indexOf('-') !== -1 ? k : k.replace(/([A-Z])/g, '-$1').toLowerCase();\n      const val =\n        typeof css[k] === 'number' && key !== 'z-index' && key !== 'opacity'\n          ? `${css[k]}px`\n          : String(css[k]);\n      ele.style.setProperty(key, val);\n    });\n  }\n  return ele;\n}\n\nconst styleId = 'hjs-slide-view-style';\nexport function styleInject(cssText: string) {\n  let style = document.querySelector(`#${styleId}`);\n  if (!style) {\n    style = document.createElement('style');\n    style.id = styleId;\n    style.appendChild(document.createTextNode(cssText));\n    (document.head || document.getElementsByTagName('head')[0]).appendChild(\n      style,\n    );\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-03-07 11:12:49\n * @Description: ******\n */\nimport EventTarget, { type IBaseEvent } from './event';\nimport {\n  isTouchable,\n  getDirection,\n  getDistance,\n  getAngle,\n  getCenter,\n  getVelocity,\n} from './util';\n\nconst fixOption = (\n  value: number | undefined,\n  defaultValue: number,\n  minVal: number,\n) => (typeof value !== 'number' || value < minVal ? defaultValue : value);\n\nfunction touchstarted(this: Gesture, event: TouchEvent) {\n  const touches = event.touches;\n  if (!touches) {\n    return;\n  }\n  event.preventDefault();\n  event.stopImmediatePropagation();\n  // 循环保存放在屏幕上的手指，这里只会保存最多两个，忽略超过三个的手指（只对单指和双指情形处理）\n  for (let i = 0, len = touches.length; i < len; ++i) {\n    const t = touches[i];\n    const p: [number, number] = [t.pageX, t.pageY];\n    const touch: [[number, number], [number, number], number] = [\n      p,\n      p,\n      t.identifier,\n    ];\n    if (!this._touch0) {\n      this._touch0 = touch;\n    } else if (!this._touch1 && touch[2] !== this._touch0[2]) {\n      this._touch1 = touch;\n    }\n  }\n  // 每次进入时先阻止所有单指事件\n  this._preventTap = true;\n  this._swipeTimeStamp = 0;\n  this._preventSingleTap = true;\n  this._preventDoubleTap = true;\n  if (this._longTapTimer) {\n    clearTimeout(this._longTapTimer);\n    this._longTapTimer = null;\n  }\n  // 双指start\n  if (this._touch1 && this._touch0) {\n    this.trigger('gestureStart', {\n      currentTarget: this.element,\n      point: [this._touch0[0], this._touch1[0]],\n      timeStamp: Date.now(),\n      sourceEvent: event,\n    });\n  }\n  // 单指start\n  else if (this._touch0) {\n    this._preventTap = false;\n    this._swipeTimeStamp = event.timeStamp;\n    // 设置一个长按定时器\n    this._longTapTimer = window.setTimeout(() => {\n      // 当前点击一旦长按超过longTapInterval则触发longTap，则松开后不会再触发所有单指事件\n      this._preventTap = true;\n      this._swipeTimeStamp = 0;\n      this._preventSingleTap = true;\n      this._preventDoubleTap = true;\n      this._longTapTimer = null;\n      this.trigger('longTap', {\n        currentTarget: this.element,\n        point: this._touch0 ? [this._touch0[0]] : [],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n        waitTime: this.longTapInterval,\n      });\n    }, this.longTapInterval);\n    if (\n      this._singleTapTimer &&\n      this._touchFirst &&\n      getDistance(this._touchFirst, this._touch0[0]) < this.doubleTapDistance\n    ) {\n      // 1，只要连续两次点击时间在doubleTapInterval之内，距离在doubleTapDistance内，无论第二次作何操作，都不会触发第一次的singleTap，但第一次的tap会触发\n      // 2，如果满足第一条时，第二次的点击有多根手指，或者长按触发longTap，则不会再触发doubleTap，第二次的tap，singleTap也不会触发\n      clearTimeout(this._singleTapTimer);\n      this._singleTapTimer = null;\n      this._preventSingleTap = true;\n      this._preventDoubleTap = false;\n    } else {\n      this._touchFirst = this._touch0[0];\n      // 表示是第一次点击或该次点击距离上一次点击时间超过doubleTapInterval，距离超过doubleTapDistance\n      this._preventSingleTap = false;\n      this._preventDoubleTap = true;\n    }\n  }\n  // 无指没有start\n  else {\n    return;\n  }\n  this.trigger('touchStart', {\n    currentTarget: this.element,\n    point: this._touch1\n      ? [this._touch0[0], this._touch1[1]]\n      : [this._touch0[0]],\n    timeStamp: Date.now(),\n    sourceEvent: event,\n  });\n}\n\nfunction touchmoved(this: Gesture, event: TouchEvent) {\n  const touches = event.changedTouches;\n  if (!touches) {\n    return;\n  }\n  event.preventDefault();\n  event.stopImmediatePropagation();\n  // 循环更新手指\n  for (let i = 0, len = touches.length; i < len; ++i) {\n    const t = touches[i];\n    const p: [number, number] = [t.pageX, t.pageY];\n    if (this._touch0 && this._touch0[2] === t.identifier) {\n      this._touch0[1] = p;\n    } else if (this._touch1 && this._touch1[2] === t.identifier) {\n      this._touch1[1] = p;\n    }\n  }\n  // 手指移动至少要有一个手指移动超过touchMoveDistance才会触发移动事件\n  if (\n    (this._touch0 &&\n      getDistance(this._touch0[0], this._touch0[1]) >=\n        this.touchMoveDistance) ||\n    (this._touch1 &&\n      getDistance(this._touch1[0], this._touch1[1]) >= this.touchMoveDistance)\n  ) {\n    // 一旦移动，则阻止所有单指点击相关事件（除了swipe）\n    this._preventTap = true;\n    this._preventSingleTap = true;\n    this._preventDoubleTap = true;\n    if (this._longTapTimer) {\n      clearTimeout(this._longTapTimer);\n      this._longTapTimer = null;\n    }\n    // 双指移动情况\n    if (this._touch1 && this._touch0) {\n      // 只有双指滑动时才会触发下面事件\n      const distance1 = getDistance(this._touch0[1], this._touch1[1]);\n      const distance0 = getDistance(this._touch0[0], this._touch1[0]);\n      if (distance1 !== 0 && distance0 !== 0) {\n        this.trigger('pinch', {\n          currentTarget: this.element,\n          point: [this._touch0[0], this._touch1[1]],\n          timeStamp: Date.now(),\n          sourceEvent: event,\n          scale: distance1 / distance0, // 可以直接设置css3里transform的scale\n        });\n      }\n      const angle1 = getAngle(this._touch0[1], this._touch1[1]);\n      const angle0 = getAngle(this._touch0[0], this._touch1[0]);\n      this.trigger('rotate', {\n        currentTarget: this.element,\n        point: [this._touch0[0], this._touch1[1]],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n        angle: angle1 + angle0, // 加和减效果一样，可以直接设置css3里transform的rotate\n      });\n      const center1 = getCenter(this._touch0[1], this._touch1[1]);\n      const center0 = getCenter(this._touch0[0], this._touch1[0]);\n      this.trigger('multiPan', {\n        currentTarget: this.element,\n        point: [this._touch0[0], this._touch1[1]],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n        deltaX: center1[0] - center0[0],\n        deltaY: center1[1] - center0[1],\n      });\n      this.trigger('gestureMove', {\n        currentTarget: this.element,\n        point: [this._touch0[0], this._touch1[1]],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n      });\n    }\n    // 单指移动\n    else if (this._touch0) {\n      // 触发单指平移事件\n      const deltaX = this._touch0[1][0] - this._touch0[0][0];\n      const deltaY = this._touch0[1][1] - this._touch0[0][1];\n      this.trigger('pan', {\n        currentTarget: this.element,\n        point: [this._touch0[0]],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n        deltaX,\n        deltaY,\n      });\n    }\n    // 无指无移动\n    else {\n      return;\n    }\n    this.trigger('touchMove', {\n      currentTarget: this.element,\n      point: this._touch1\n        ? [this._touch0[0], this._touch1[1]]\n        : [this._touch0[0]],\n      timeStamp: Date.now(),\n      sourceEvent: event,\n    });\n  }\n}\n\nfunction touchended(this: Gesture, event: TouchEvent) {\n  const touches = event.changedTouches;\n  if (!touches) {\n    return;\n  }\n  event.stopImmediatePropagation();\n  // 临时保存本次\n  let touch: [[number, number], [number, number], number] | null = null;\n  // 循环删除已经拿开的手指\n  for (let i = 0, len = touches.length; i < len; ++i) {\n    const t = touches[i];\n    if (this._touch0 && this._touch0[2] === t.identifier) {\n      touch = this._touch0;\n      this._touch0 = null;\n    } else if (this._touch1 && this._touch1[2] === t.identifier) {\n      this._touch1 = null;\n    }\n  }\n  // 双指变单指\n  if (this._touch1 && !this._touch0) {\n    this._touch0 = this._touch1;\n    this._touch1 = null;\n  }\n  // 松开时清除longTapTimer（一旦松开就不存在长按，当然有可能已经发生过了）\n  if (this._longTapTimer) {\n    clearTimeout(this._longTapTimer);\n    this._longTapTimer = null;\n  }\n  // 仍然存在至少一根手指\n  if (this._touch0) {\n    // 只剩下一根在上面了\n    if (!this._touch1) {\n      // 双指抬起，只剩下一指，此时就认为该点是移动的起点（否则会把双指移动的起点作为起点，移动时会出现跳跃）\n      this._touch0[0] = this._touch0[1];\n      // 同时可以触发一次start事件\n      this.trigger('touchStart', {\n        currentTarget: this.element,\n        point: [this._touch0[0]],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n      });\n    }\n    this.trigger('gestureEnd', {\n      currentTarget: this.element,\n      point: [this._touch0[0]],\n      timeStamp: Date.now(),\n      sourceEvent: event,\n    });\n  }\n  // 全部拿开（双指同时抬起，最后一指抬起，仅仅一指抬起）\n  else {\n    if (!this._preventTap) {\n      this.trigger('tap', {\n        currentTarget: this.element,\n        point: !touch ? [] : [touch[1]],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n      });\n    }\n    if (this._swipeTimeStamp > 0 && touch) {\n      const velocity = getVelocity(\n        event.timeStamp - this._swipeTimeStamp,\n        getDistance(touch[0], touch[1]),\n      );\n      // 滑动距离超过swipeDistance并且滑动速率大于swipeVelocity，才触发swipe\n      if (\n        velocity >= this.swipeVelocity &&\n        (Math.abs(touch[1][0] - touch[0][0]) >= this.swipeDistance ||\n          Math.abs(touch[1][1] - touch[0][1]) >= this.swipeDistance)\n      ) {\n        const direction = getDirection(touch[0], touch[1]);\n        this.trigger('swipe', {\n          currentTarget: this.element,\n          point: [touch[1]],\n          timeStamp: Date.now(),\n          sourceEvent: event,\n          direction,\n          velocity,\n        });\n      }\n    }\n    if (!this._preventSingleTap) {\n      // 等待doubleTapInterval，如果时间内没有点击第二次，则触发\n      this._singleTapTimer = window.setTimeout(() => {\n        this._singleTapTimer = null;\n        this.trigger('singleTap', {\n          currentTarget: this.element,\n          point: !touch ? [] : [touch[1]],\n          timeStamp: Date.now(),\n          sourceEvent: event,\n          delayTime: this.doubleTapInterval,\n        });\n      }, this.doubleTapInterval);\n    }\n    if (!this._preventDoubleTap) {\n      this.trigger('doubleTap', {\n        currentTarget: this.element,\n        point: !touch ? [] : [touch[1]],\n        timeStamp: Date.now(),\n        sourceEvent: event,\n        intervalTime: this.doubleTapInterval,\n      });\n    }\n  }\n  this.trigger('touchEnd', {\n    currentTarget: this.element,\n    point: [],\n    timeStamp: Date.now(),\n    sourceEvent: event,\n  });\n}\n\nfunction touchcanceled(this: Gesture, event: TouchEvent) {\n  this.trigger('touchCancel', {\n    currentTarget: this.element,\n    point: [],\n    timeStamp: Date.now(),\n    sourceEvent: event,\n  });\n  touchended.apply(this, [event]);\n}\n\nfunction scrollcanceled(this: Gesture) {\n  if (this._singleTapTimer) {\n    clearTimeout(this._singleTapTimer);\n    this._singleTapTimer = null;\n  }\n  if (this._longTapTimer) {\n    clearTimeout(this._longTapTimer);\n    this._longTapTimer = null;\n  }\n  this._touchFirst = null;\n  this._touch0 = null;\n  this._touch1 = null;\n  this._preventTap = true;\n  this._swipeTimeStamp = 0;\n  this._preventSingleTap = true;\n  this._preventDoubleTap = true;\n}\n\nclass Gesture extends EventTarget<\n  HTMLElement,\n  TouchEvent,\n  GestureEventType,\n  GestureEvent\n> {\n  element: HTMLElement;\n  longTapInterval: number = 750;\n  doubleTapInterval: number = 250;\n  doubleTapDistance: number = 10;\n  touchMoveDistance: number = 3;\n  swipeDistance: number = 30;\n  swipeVelocity: number = 0.3;\n  _singleTapTimer: number | null = null;\n  _longTapTimer: number | null = null;\n  _preventTap: boolean = true;\n  _swipeTimeStamp: number = 0;\n  _preventSingleTap: boolean = true;\n  _preventDoubleTap: boolean = true;\n  _touchFirst: [number, number] | null = null;\n  _touch0: [[number, number], [number, number], number] | null = null;\n  _touch1: [[number, number], [number, number], number] | null = null;\n  _destory: (() => void) | null = null;\n  constructor(element: HTMLElement | string, options?: GestureOptions) {\n    super();\n    let tempElement: HTMLElement | null;\n    if (typeof element === 'string') {\n      tempElement = document.querySelector(element);\n    } else {\n      tempElement = element;\n    }\n    if (!tempElement || !(tempElement instanceof HTMLElement)) {\n      throw new Error('Please pass in a valid element...');\n    }\n    this.element = tempElement;\n    const {\n      longTapInterval,\n      doubleTapInterval,\n      doubleTapDistance,\n      touchMoveDistance,\n      swipeDistance,\n      swipeVelocity,\n    } = options || {};\n    this.longTapInterval = fixOption(longTapInterval, 750, 500);\n    this.doubleTapInterval = fixOption(doubleTapInterval, 250, 200);\n    this.doubleTapDistance = fixOption(doubleTapDistance, 10, 1);\n    this.touchMoveDistance = fixOption(touchMoveDistance, 3, 0);\n    this.swipeDistance = fixOption(swipeDistance, 30, 0);\n    this.swipeVelocity = fixOption(swipeVelocity, 0.3, 0.01);\n    // 注册触摸事件\n    if (isTouchable(this.element)) {\n      const started = touchstarted.bind(this);\n      const moved = touchmoved.bind(this);\n      const ended = touchended.bind(this);\n      const canceled = touchcanceled.bind(this);\n      this.element.addEventListener('touchstart', started, false);\n      this.element.addEventListener('touchmove', moved, false);\n      this.element.addEventListener('touchend', ended, false);\n      this.element.addEventListener('touchcancel', canceled, false);\n      const scrolled = scrollcanceled.bind(this);\n      window.addEventListener('scroll', scrolled);\n      this._destory = () => {\n        this.element.removeEventListener('touchstart', started);\n        this.element.removeEventListener('touchmove', moved);\n        this.element.removeEventListener('touchend', ended);\n        this.element.removeEventListener('touchcancel', canceled);\n        window.removeEventListener('scroll', scrolled);\n      };\n    }\n  }\n  done() {\n    return !!this._destory;\n  }\n  destory() {\n    // 解除所有事件\n    super.off();\n    scrollcanceled.apply(this);\n    // 解除手势事件\n    if (this._destory) {\n      this._destory();\n      this._destory = null;\n    }\n  }\n}\n\nexport type GestureEventType =\n  | 'pinch' // 双指放大缩小\n  | 'rotate' // 双指旋转\n  | 'multiPan' // 双指平移\n  | 'pan' // 单指平移\n  | 'swipe' // 单指快速滑动\n  | 'tap' // 单指轻点（快，双击时会触发）\n  | 'singleTap' // 单指点击（有延迟，双击时不触发）\n  | 'longTap' // 单指长按\n  | 'doubleTap' // 单指双击\n  | 'touchStart' // 触摸开始\n  | 'touchMove' // 触摸移动\n  | 'touchEnd' // 触摸抬起\n  | 'touchCancel' // 触摸取消\n  | 'gestureStart' // 双（多）指开始\n  | 'gestureMove' // 双（多）指移动\n  | 'gestureEnd'; // 双（多）指结束\n\nexport type GestureEvent = {\n  point: [number, number][]; // 当前手指点坐标[pageX,pageY]\n  scale?: number; // 缩放比例\n  angle?: number; // 旋转角度\n  deltaX?: number; // x方向移动最终距离\n  deltaY?: number; // y方向移动最终距离\n  direction?: string; // 滑动方向\n  velocity?: number; // 滑动速率\n  waitTime?: number; // 长按等待时间\n  delayTime?: number; // 点击延迟时间\n  intervalTime?: number; // 双击间隔时间\n} & IBaseEvent<HTMLElement, TouchEvent>;\n\nexport type GestureOptions = {\n  longTapInterval?: number; // 设置长按等待时间阈值，单位ms\n  doubleTapInterval?: number; // 设置双击时间间隔，单位ms\n  doubleTapDistance?: number; // 双击两次点击的位置距离触发阈值\n  touchMoveDistance?: number; // 移动阈值，超过这个值才算移动\n  swipeDistance?: number; // 滑动阈值，超过这个值才触发滑动\n  swipeVelocity?: number; // 滑动速率，超过这个值可触发滑动，设置小一点\n};\n\nexport default Gesture;\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-03-07 13:43:03\n * @Description: ******\n */\nimport Gesture, { type GestureEvent } from './gesture';\n\nfunction started(\n  element: HTMLElement,\n  event: GestureEvent,\n  start: AgentHandler,\n) {\n  const e = event.sourceEvent as TouchEvent;\n  // 表示是已经有一个手指放上去了\n  if (element.getAttribute('data-touch-identifier')) {\n    return;\n  }\n  const touch = e.touches[0];\n  if (!touch) {\n    return;\n  }\n  // 设置主手指\n  element.setAttribute('data-touch-identifier', touch.identifier.toString());\n  start({\n    type: 'touch',\n    currentTarget: element,\n    point: [touch.pageX, touch.pageY],\n    sourceEvent: event,\n  });\n}\n\nfunction moved(element: HTMLElement, event: GestureEvent, move: AgentHandler) {\n  const e = event.sourceEvent as TouchEvent;\n  let changedTouch = null;\n  for (let i = 0; i < e.changedTouches.length; i++) {\n    const touch = e.changedTouches.item(i);\n    if (\n      touch &&\n      touch.identifier.toString() ===\n        element.getAttribute('data-touch-identifier')\n    ) {\n      changedTouch = touch;\n      break;\n    }\n  }\n  // 表示移动的手指不是主手指\n  if (!changedTouch) {\n    return;\n  }\n  move({\n    type: 'touch',\n    currentTarget: element,\n    point: [changedTouch.pageX, changedTouch.pageY],\n    sourceEvent: event,\n  });\n}\n\nfunction ended(element: HTMLElement, event: GestureEvent, end: AgentHandler) {\n  const e = event.sourceEvent as TouchEvent;\n  let changedTouch = null;\n  for (let i = 0; i < e.changedTouches.length; i++) {\n    const touch = e.changedTouches.item(i);\n    if (\n      touch &&\n      touch.identifier.toString() ===\n        element.getAttribute('data-touch-identifier')\n    ) {\n      changedTouch = touch;\n      break;\n    }\n  }\n  // 表示抬起的手指不是主手指\n  if (!changedTouch) {\n    return;\n  }\n  // 没有手指在上面了\n  element.setAttribute('data-touch-identifier', '');\n  end({\n    type: 'touch',\n    currentTarget: element,\n    point: [changedTouch.pageX, changedTouch.pageY],\n    sourceEvent: event,\n  });\n}\n\nfunction touched(\n  element: HTMLElement,\n  event: GestureEvent,\n  touch: AgentHandler,\n) {\n  touch({\n    type: 'touch',\n    point: event.point[0],\n    currentTarget: element,\n    sourceEvent: event,\n  });\n}\n\nfunction mousedowned(\n  element: HTMLElement,\n  event: MouseEvent,\n  { start, move, end }: AgentEventHandler,\n) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n  document.addEventListener('mousemove', mousemoved);\n  document.addEventListener('mouseup', mouseupped);\n  if ('onselectstart' in document) {\n    document.addEventListener('dragstart', dragstarted, {\n      capture: true,\n      passive: false,\n    });\n    document.addEventListener('selectstart', dragstarted, {\n      capture: true,\n      passive: false,\n    });\n  }\n  const x0 = event.clientX;\n  const y0 = event.clientY;\n  start &&\n    start({\n      type: 'mouse',\n      point: [event.pageX, event.pageY],\n      currentTarget: element,\n      sourceEvent: event,\n    });\n\n  function dragstarted(e: Event) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  function mousemoved(e: MouseEvent) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n    const dx = e.clientX - x0;\n    const dy = e.clientY - y0;\n    if (dx * dx + dy * dy >= 3 * 3) {\n      move &&\n        move({\n          type: 'mouse',\n          point: [e.pageX, e.pageY],\n          currentTarget: element,\n          sourceEvent: e,\n        });\n    }\n  }\n\n  function mouseupped(e: MouseEvent) {\n    e.stopImmediatePropagation();\n    document.removeEventListener('mousemove', mousemoved);\n    document.removeEventListener('mouseup', mouseupped);\n    if ('onselectstart' in document) {\n      document.removeEventListener('dragstart', dragstarted);\n      document.removeEventListener('selectstart', dragstarted);\n    }\n    end &&\n      end({\n        type: 'mouse',\n        point: [e.pageX, e.pageY],\n        currentTarget: element,\n        sourceEvent: e,\n      });\n  }\n}\n\nfunction moused(element: HTMLElement, event: MouseEvent, mouse: AgentHandler) {\n  event.preventDefault();\n  mouse({\n    type: 'mouse',\n    point: [event.pageX, event.pageY],\n    currentTarget: element,\n    sourceEvent: event,\n  });\n}\n\nexport type AgentEvent = {\n  type: 'mouse' | 'touch';\n  point: number[];\n  currentTarget: HTMLElement;\n  sourceEvent: GestureEvent | MouseEvent;\n};\n\ntype AgentHandler = (e: AgentEvent) => void;\n\ntype AgentEventHandler = {\n  start?: AgentHandler;\n  move?: AgentHandler;\n  end?: AgentHandler;\n  press?: AgentHandler;\n  longPress?: AgentHandler;\n  doublePress?: AgentHandler;\n};\n\nexport type IAgent = {\n  element: HTMLElement;\n  destory: () => void;\n};\n\nexport default function agent(ele: HTMLElement, handler: AgentEventHandler) {\n  if (!ele || !(ele instanceof HTMLElement)) {\n    throw new Error('Binding events require HTMLElement...');\n  }\n  let destory = () => {};\n  const { start, move, end, press, longPress, doublePress } = handler;\n  const gesture = new Gesture(ele);\n  if (gesture.done()) {\n    start &&\n      gesture.on('touchStart', (e: GestureEvent) => started(ele, e, start));\n    move && gesture.on('touchMove', (e: GestureEvent) => moved(ele, e, move));\n    end && gesture.on('touchEnd', (e: GestureEvent) => ended(ele, e, end));\n    press && gesture.on('tap', (e: GestureEvent) => touched(ele, e, press));\n    longPress &&\n      gesture.on('longTap', (e: GestureEvent) => touched(ele, e, longPress));\n    doublePress &&\n      gesture.on('doubleTap', (e: GestureEvent) =>\n        touched(ele, e, doublePress),\n      );\n    destory = () => {\n      gesture.destory();\n    };\n  } else {\n    let mousedown: ((e: MouseEvent) => void) | null = null;\n    if (start || move || end) {\n      mousedown = (e: MouseEvent) => mousedowned(ele, e, { start, move, end });\n      ele.addEventListener('mousedown', mousedown);\n    }\n    let click: ((e: MouseEvent) => void) | null = null;\n    if (press) {\n      click = (e: MouseEvent) => moused(ele, e, press);\n      ele.addEventListener('click', click);\n    }\n    let rightclick: ((e: MouseEvent) => void) | null = null;\n    if (longPress) {\n      rightclick = (e: MouseEvent) => moused(ele, e, longPress);\n      ele.addEventListener('contextmenu', rightclick);\n    }\n    let dblclick: ((e: MouseEvent) => void) | null = null;\n    if (doublePress) {\n      dblclick = (e: MouseEvent) => moused(ele, e, doublePress);\n      ele.addEventListener('dblclick', dblclick);\n    }\n    destory = () => {\n      mousedown && ele.removeEventListener('mousedown', mousedown);\n      click && ele.removeEventListener('click', click);\n      dblclick && ele.removeEventListener('dblclick', dblclick);\n      rightclick && ele.removeEventListener('contextmenu', rightclick);\n    };\n  }\n  return {\n    element: ele,\n    destory,\n  };\n}\n\nexport function onOnceTransitionEnd(\n  ele: HTMLElement,\n  transitionEnd: (e: TransitionEvent) => void,\n) {\n  if (!ele) {\n    return;\n  }\n  const transitionEndWrapper = (e: TransitionEvent) => {\n    transitionEnd(e);\n    ele.removeEventListener('transitionend', transitionEndWrapper);\n  };\n  ele.addEventListener('transitionend', transitionEndWrapper);\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-03-07 14:03:23\n * @Description: ******\n */\n\nimport EventTarget, { type IBaseEvent } from './event';\nimport agent, {\n  onOnceTransitionEnd,\n  type AgentEvent,\n  type IAgent,\n} from './agent';\nimport {\n  getDistance,\n  rebounceSize,\n  addClass,\n  setStyle,\n  styleInject,\n} from './util';\nimport css from './css';\n\nconst generate = function generate(\n  container: HTMLElement | string,\n  className?: string,\n) {\n  let tempContainer: HTMLElement | null;\n  if (typeof container === 'string') {\n    tempContainer = document.querySelector(container);\n  } else {\n    tempContainer = container;\n  }\n  if (!tempContainer || !(tempContainer instanceof HTMLElement)) {\n    throw new Error('Please pass in a valid container element...');\n  }\n  styleInject(css);\n  const view = addClass(\n    document.createElement('div'),\n    `hjs-slide-view ${className || ''}`,\n  );\n  const element = addClass(\n    document.createElement('div'),\n    'hjs-slideview__middle',\n  );\n  const leftElement = addClass(\n    document.createElement('div'),\n    'hjs-slideview__left',\n  );\n  leftElement.appendChild(\n    addClass(document.createElement('div'), 'hjs-slideview__buttons'),\n  );\n  const rightElement = addClass(\n    document.createElement('div'),\n    'hjs-slideview__right',\n  );\n  rightElement.appendChild(\n    addClass(document.createElement('div'), 'hjs-slideview__buttons'),\n  );\n  view.appendChild(leftElement);\n  view.appendChild(element);\n  view.appendChild(rightElement);\n  tempContainer.innerHTML = '';\n  tempContainer.appendChild(view);\n  return element;\n};\n\nconst cTransform = function cTransform(\n  this: SlideView,\n  index: number,\n  confirm: boolean,\n  rebSize: number = 0,\n  duration: number = this.duration,\n) {\n  const { _buttons, _translateX } = this;\n  if (!_buttons || !_buttons.length) {\n    return;\n  }\n  // 前面已有按钮的滑动距离\n  let leftTransformTotal = 0;\n  let rightTransformTotal = 0;\n  for (let i = _buttons.length - 1; i >= 0; i--) {\n    const { element: btnEl, width, position, slideOut } = _buttons[i];\n    const factor = _translateX === 0 ? 0 : _translateX / Math.abs(_translateX);\n    if (i === index) {\n      // 当前的按钮将进行变换展示\n      const btnChild = btnEl.firstChild as HTMLElement;\n      setStyle(btnChild.firstChild as HTMLElement, {\n        display: confirm ? 'none' : 'block',\n      });\n      setStyle(btnChild.lastChild as HTMLElement, {\n        display: confirm ? 'block' : 'none',\n      });\n      const transformx = confirm\n        ? _translateX\n        : factor *\n          (width +\n            (position === 'left' ? leftTransformTotal : rightTransformTotal));\n      setStyle(btnEl, {\n        width: confirm\n          ? Math.abs(_translateX + rebSize * factor)\n          : duration > 0 && !slideOut\n          ? width\n          : 'auto',\n        transform: `translate3d(${transformx + rebSize * factor}px, 0, 0)`,\n        transition:\n          duration <= 0 ? '' : `width ${duration}s, transform ${duration}s`,\n      });\n      if (!confirm && !slideOut && duration > 0) {\n        // 因为width直接设置auto，是没有动画过程的\n        onOnceTransitionEnd(btnEl, () =>\n          setStyle(btnEl, {\n            width: 'auto',\n          }),\n        );\n      }\n    } else if (i > index) {\n      // 注意，这里不分position，因为大于index的都是压在上面的，压在下面的不需要变换\n      // 压在上面的收起\n      const transformx = confirm\n        ? 0\n        : factor *\n          (width +\n            (position === 'left' ? leftTransformTotal : rightTransformTotal));\n      setStyle(btnEl, {\n        transform: `translate3d(${transformx}px, 0, 0)`,\n        transition: duration <= 0 ? '' : `transform ${duration}s`,\n      });\n    }\n    if (position === 'left') {\n      leftTransformTotal += width;\n    } else {\n      rightTransformTotal += width;\n    }\n  }\n};\n\nconst transform = function transform(\n  this: SlideView,\n  moveX: number,\n  positive: boolean,\n  status: number,\n  duration: number = this.duration,\n) {\n  const { element, _buttons, _slideRange } = this;\n  const [slideMin, slideMax] = _slideRange || [0, 0];\n  if (!_buttons || !_buttons.length) {\n    return;\n  }\n  setStyle(element, {\n    transform: `translate3d(${moveX}px, 0, 0)`,\n    transition: duration <= 0 || status === 2 ? '' : `transform ${duration}s`,\n  });\n  // 前面已有按钮的占比距离\n  let leftTransformTotal = 0;\n  let rightTransformTotal = 0;\n  for (let i = _buttons.length - 1; i >= 0; i--) {\n    const { element: btnEl, width, lastOne, position, icon } = _buttons[i];\n    const btnChild = btnEl.firstChild as HTMLElement;\n    // 当前按钮需要滑出的占比距离\n    const transformb =\n      (width / Math.abs(position === 'left' ? slideMax : slideMin)) * moveX;\n    // 当前按钮滑出距离应该是占比距离+前面已有按钮的占比距离\n    const transformx =\n      transformb +\n      (position === 'left' ? leftTransformTotal : rightTransformTotal);\n    // 左边或右边的最后一个按钮\n    // (leftTransformTotal === 0 && position === 'left') ||  (rightTransformTotal === 0 && position === 'right')\n    if (lastOne) {\n      if (!icon) {\n        setStyle(btnChild, {\n          [`padding-${position}`]:\n            (Math.abs(transformb) <= width\n              ? 0\n              : Math.abs(status === 1 ? moveX : transformx) - width) + 16,\n          transition:\n            duration <= 0\n              ? ''\n              : `padding-${position} ${duration}s ease ${\n                  duration *\n                  (positive ? 1 : -1) *\n                  (position === 'right' ? 1 : -1)\n                }s`,\n        });\n      } else {\n        setStyle(btnChild, {\n          [`padding-${position}`]:\n            Math.abs(transformb) > width && status === 1\n              ? Math.abs(moveX) - width\n              : 0,\n          transition: duration <= 0 ? '' : `padding-${position} ${duration}s`,\n        });\n      }\n      setStyle(btnEl, {\n        transform: `translate3d(${status === 1 ? moveX : transformx}px, 0, 0)`,\n        transition: duration <= 0 ? '' : `transform ${duration}s`,\n      });\n    } else {\n      if (!icon) {\n        setStyle(btnChild, {\n          [`padding-${position}`]:\n            (Math.abs(transformb) <= width ? 0 : Math.abs(transformx) - width) +\n            16,\n          transition:\n            duration <= 0 || status === 2\n              ? ''\n              : `padding-${position} ${duration}s ease ${\n                  duration *\n                  (positive ? 1 : -1) *\n                  (position === 'right' ? 1 : -1)\n                }s`,\n        });\n      }\n      setStyle(btnEl, {\n        transform: `translate3d(${transformx}px, 0, 0)`,\n        transition:\n          duration <= 0 || status === 2 ? '' : `transform ${duration}s`,\n      });\n    }\n    // 累计已滑出按钮的占比距离\n    if (position === 'left') {\n      leftTransformTotal += transformb;\n    } else {\n      rightTransformTotal += transformb;\n    }\n  }\n};\n\nconst start = function start(this: SlideView, e: AgentEvent) {\n  if (!this._buttons || this.disable) {\n    return;\n  }\n  this._isMoving = true;\n  this._startTX = this._translateX;\n  this._startPoint = e.point;\n  this._slideAngle = 0;\n  this._slideStatus = 0;\n  this._timeStamp = 0;\n};\n\nconst move = function move(this: SlideView, e: AgentEvent) {\n  if (!this._buttons || this.disable || !this._isMoving || !this._startPoint) {\n    return;\n  }\n  const pageX = e.point[0] - this._startPoint[0];\n  const pageY = e.point[1] - this._startPoint[1];\n  // 左侧45度角为界限，大于45度则允许水平滑动\n  if (this._slideAngle === 0) {\n    this._slideAngle = Math.abs(pageX) - Math.abs(pageY);\n  }\n  if (this._slideAngle < 0) {\n    return;\n  }\n  // 滑动距离\n  let moveX = 0;\n  let duration = 0;\n  const slideX = this._startTX + pageX;\n  const [slideMin, slideMax] = this._slideRange || [0, 0];\n  if (slideX <= slideMin) {\n    if (slideMin === 0) {\n      // 如果最小等于0，表示只有左边按钮，则可以重置初始值\n      this._startPoint = e.point;\n      this._startTX = this._translateX;\n      this._slideAngle = 0;\n      this._slideStatus = 0;\n      this._timeStamp = 0;\n      moveX = 0;\n    } else {\n      if (this.fullSlide) {\n        const elWidth = this.element.getBoundingClientRect().width;\n        const threshold = -Math.max(elWidth * 0.75, Math.abs(slideMin));\n        const timeStamp =\n          e.sourceEvent instanceof MouseEvent\n            ? e.sourceEvent.timeStamp\n            : e.sourceEvent.sourceEvent.timeStamp;\n        if (slideX <= threshold) {\n          if (this._slideStatus !== 1) {\n            this._timeStamp = timeStamp;\n            this._slideStatus = 1;\n          }\n          moveX =\n            (this.rebounce ? rebounceSize(slideX - threshold) : 0) -\n            elWidth * 0.95;\n          duration = Math.max(\n            0,\n            this.duration - (timeStamp - this._timeStamp) / 1000,\n          );\n        } else {\n          if (this._slideStatus === 0) {\n            // 从[slideMin,0]进入[threshold,slideMin]之间\n            this._timeStamp = 0;\n          } else if (this._slideStatus === 1) {\n            // 从[-Infinity,threshold]进入[threshold,slideMin]之间\n            this._timeStamp = timeStamp;\n            this._slideStatus = 2;\n          }\n          moveX = slideX;\n          duration = Math.max(\n            0,\n            this.duration / 2 - (timeStamp - this._timeStamp) / 1000,\n          );\n        }\n      } else {\n        moveX =\n          (this.rebounce\n            ? rebounceSize(slideX - Math.min(slideMin, this._startTX))\n            : 0) + Math.min(slideMin, this._startTX);\n      }\n    }\n  } else if (slideX < slideMax) {\n    // 滑动距离在最大最小之间，逐步滑动\n    moveX = slideX;\n    this._slideStatus = 0;\n    this._timeStamp = 0;\n  } else {\n    if (slideMax === 0) {\n      // 如果最大等于0，表示只有右边按钮，则可以重置初始值\n      this._startPoint = e.point;\n      this._startTX = this._translateX;\n      this._slideAngle = 0;\n      this._slideStatus = 0;\n      this._timeStamp = 0;\n      moveX = 0;\n    } else {\n      if (this.fullSlide) {\n        const elWidth = this.element.getBoundingClientRect().width;\n        const threshold = Math.max(elWidth * 0.75, Math.abs(slideMax));\n        const timeStamp =\n          e.sourceEvent instanceof MouseEvent\n            ? e.sourceEvent.timeStamp\n            : e.sourceEvent.sourceEvent.timeStamp;\n        if (slideX >= threshold) {\n          if (this._slideStatus !== 1) {\n            this._timeStamp = timeStamp;\n            this._slideStatus = 1;\n          }\n          moveX =\n            (this.rebounce ? rebounceSize(slideX - threshold) : 0) +\n            elWidth * 0.95;\n          duration = Math.max(\n            0,\n            this.duration - (timeStamp - this._timeStamp) / 1000,\n          );\n        } else {\n          if (this._slideStatus === 0) {\n            // 从[0,slideMax]进入[slideMax,threshold]之间\n            this._timeStamp = 0;\n          } else if (this._slideStatus === 1) {\n            // 从[threshold,+Infinity]进入[slideMax,threshold]之间\n            this._timeStamp = timeStamp;\n            this._slideStatus = 2;\n          }\n          moveX = slideX;\n          duration = Math.max(\n            0,\n            this.duration / 2 - (timeStamp - this._timeStamp) / 1000,\n          );\n        }\n      } else {\n        moveX =\n          (this.rebounce\n            ? rebounceSize(slideX - Math.max(slideMax, this._startTX))\n            : 0) + Math.max(slideMax, this._startTX);\n      }\n    }\n  }\n  if (this._confirmIndex !== -1) {\n    // 如果当前处于按钮确认状态，滑动之前需要先取消\n    cTransform.apply(this, [this._confirmIndex, false, 0, 0]);\n    this._confirmIndex = -1;\n  }\n  const positive = moveX > this._translateX;\n  this._translateX = moveX;\n  transform.apply(this, [moveX, positive, this._slideStatus, duration]);\n  return false; // 禁止垂直方向的滑动\n};\n\nconst end = function end(this: SlideView, e: AgentEvent) {\n  if (\n    !this._buttons ||\n    this.disable ||\n    !this._isMoving ||\n    this._slideAngle < 0 ||\n    !this._startPoint\n  ) {\n    return;\n  }\n  if (this.fullSlide && this._slideStatus === 1) {\n    const index = this._buttons.findIndex(\n      ({ lastOne, position }) =>\n        lastOne &&\n        ((this._translateX > 0 && position === 'left') ||\n          (this._translateX < 0 && position === 'right')),\n    );\n    buttonSlide.apply(this, [e, index]);\n  } else if (\n    this._translateX === 0 ||\n    // 这个判断是因为手势里默认移动距离在3px以内不算移动\n    getDistance(this._startPoint, e.point) < 3 ||\n    (this._translateX < 0 &&\n      (e.point[0] - this._startPoint[0] >= 0 ||\n        this._translateX > -this.throttle)) ||\n    (this._translateX > 0 &&\n      (e.point[0] - this._startPoint[0] <= 0 ||\n        this._translateX < this.throttle))\n  ) {\n    this.hideButton();\n  } else {\n    this.showButton(this._translateX > 0 ? 'left' : 'right');\n  }\n  this._isMoving = false;\n  this._startTX = 0;\n  this._startPoint = [0, 0];\n  this._slideAngle = 0;\n  this._slideStatus = 0;\n  this._timeStamp = 0;\n};\n\nconst press = function press(this: SlideView, e: AgentEvent) {\n  // 事件只发生于按钮收起隐藏情况\n  if (this._translateX === 0) {\n    this.trigger('press', {\n      currentTarget: this.element,\n      timeStamp: Date.now(),\n      sourceEvent: e,\n    });\n  }\n};\n\nconst longPress = function longPress(this: SlideView, e: AgentEvent) {\n  // 事件只发生于按钮收起隐藏情况\n  if (this._translateX === 0) {\n    this.trigger('longPress', {\n      currentTarget: this.element,\n      timeStamp: Date.now(),\n      sourceEvent: e,\n    });\n  }\n};\n\nconst doublePress = function doublePress(this: SlideView, e: AgentEvent) {\n  // 事件只发生于按钮收起隐藏情况\n  if (this._translateX === 0) {\n    this.trigger('doublePress', {\n      currentTarget: this.element,\n      timeStamp: Date.now(),\n      sourceEvent: e,\n    });\n  }\n};\n\nconst buttonPress = function buttonPress(this: SlideView, e: AgentEvent) {\n  // 表示按钮处于收起隐藏状态\n  if (this._translateX === 0 || !this._buttons) {\n    return;\n  }\n  const { sourceEvent, currentTarget } = e;\n  let target = (\n    sourceEvent instanceof MouseEvent\n      ? sourceEvent.target\n      : sourceEvent.sourceEvent.target\n  ) as HTMLElement;\n  while (target !== currentTarget && !target.getAttribute('data-index')) {\n    target = target.parentNode as HTMLElement;\n  }\n  const index = +(target.getAttribute('data-index') || -1);\n  if (index >= 0 && this._buttons[index]) {\n    const { lastOne, confirm, slideOut, data } = this._buttons[index];\n    // 最后一个按钮单独处理\n    if (this.fullSlide && lastOne) {\n      buttonSlide.apply(this, [e, index, target]);\n      return;\n    }\n    // 如果是再次确认或者首次无需确认，则直接执行\n    let type: SlideViewEventType = 'buttonPress';\n    if (this._confirmIndex === index || !confirm) {\n      // 点击按钮后隐藏按钮（隐藏按钮里已处理取消确认情况）\n      if (slideOut) {\n        this.hideButton();\n      } else {\n        cTransform.apply(this, [index, false]);\n        this._confirmIndex = -1;\n      }\n    } else {\n      // 当前事件需要确认，设置回弹效果\n      if (this.rebounce) {\n        cTransform.apply(this, [index, true, SlideView.REBOUNCE_SIZE]);\n        onOnceTransitionEnd(this._buttons[index].element, () => {\n          cTransform.apply(this, [index, true]);\n        });\n      } else {\n        cTransform.apply(this, [index, true]);\n      }\n      this._confirmIndex = index;\n      type = 'buttonConfirm';\n    }\n    this.trigger(type, {\n      index,\n      data,\n      currentTarget: target,\n      timeStamp: Date.now(),\n      sourceEvent: e,\n    });\n  }\n};\n\nconst buttonSlide = function buttonSlide(\n  this: SlideView,\n  event: AgentEvent,\n  index: number,\n  target?: HTMLElement,\n) {\n  // 表示按钮处于收起隐藏状态\n  if (this._translateX === 0 || !this._buttons || !this._buttons[index]) {\n    return;\n  }\n  let type: SlideViewEventType = 'buttonPress';\n  const { element, confirm, slideOut, data } = this._buttons[index];\n  // 此时是滑满之后的二次点击\n  if (this._confirmIndex === index) {\n    if (slideOut) {\n      this.hideButton();\n    } else {\n      this.showButton(this._translateX > 0 ? 'left' : 'right');\n      this._confirmIndex = -1;\n    }\n  }\n  // 此时是滑动到最满，或者点最后一个按钮，滑满\n  else {\n    const moveX =\n      (this._translateX > 0 ? 1 : -1) *\n      this.element.getBoundingClientRect().width;\n    const positive = this._translateX < moveX;\n    this._translateX = moveX;\n    transform.apply(this, [moveX, positive, 1]);\n    if (confirm) {\n      type = 'buttonConfirm';\n      this._confirmIndex = index;\n    }\n  }\n  this.trigger(type, {\n    index,\n    data,\n    currentTarget: target || element,\n    timeStamp: Date.now(),\n    sourceEvent: event,\n  });\n};\n\nclass SlideView extends EventTarget<\n  HTMLElement,\n  AgentEvent | null,\n  SlideViewEventType,\n  SlideViewEvent\n> {\n  static REBOUNCE_SIZE: number = 12; // 弹性尺寸\n  element: HTMLElement; // 触发滑动的元素\n  disable: boolean = false; // 禁止按钮滑出\n  duration: number = 0.4; // 按钮滑出动画时间（秒级）\n  throttle: number = 60; // 按钮滑出距离阈值（超过这个阈值时抬起后自动滑出，否则收起）\n  rebounce: boolean = true; // 滑出时是否有弹性效果\n  fullSlide: boolean = false; // 是否启用最后一个按钮覆盖滑动\n  _shown: boolean = false; // 按钮状态，已滑出（展开）\n  _destory: boolean = false;\n  _confirmIndex: number = -1; // 当前正在确认的按钮\n  _translateX: number = 0; // 元素当前位移值\n  _slideAngle: number = 0; // 手指滑出时与水平角度值（非真实角度，只是xy差，反映是否小于45度）\n  _slideStatus: number = 0; // 滑动状态\n  _slideRange: number[] | null = null; // element逐步移动最大范围\n  _startPoint: number[] | null = null; // 手指放上后初始点\n  _startTX: number = 0; // 手指放上那一刻，translateX值\n  _timeStamp: number = 0; // 移动时的时间戳\n  _isMoving: boolean = false; // 是否正在滑动\n  _buttons:\n    | null\n    | {\n        element: HTMLElement; //当前按钮元素\n        width: number; // 当前按钮的宽度\n        lastOne: boolean; // 是否是最后一个按钮\n        position?: ButtonPosition; // 按钮位置\n        slideOut?: boolean; // 按钮点击后是否隐藏按钮\n        icon?: boolean; // 是否是图标\n        confirm?: boolean; // 是否有再次确认操作\n        data?: any; // 按钮携带数据\n      }[] = null; // 按钮集合\n  _agents: IAgent[] | null = null;\n  constructor(options: SlideViewOptions) {\n    super();\n    const {\n      container,\n      className,\n      content,\n      buttons,\n      duration,\n      throttle,\n      disable = false,\n      rebounce = true,\n      fullSlide = false,\n    } = options;\n    this.element = generate(container, className);\n    this._agents = [\n      agent(this.element, {\n        start: start.bind(this),\n        move: move.bind(this),\n        end: end.bind(this),\n        press: press.bind(this),\n        longPress: longPress.bind(this),\n        doublePress: doublePress.bind(this),\n      }),\n    ];\n    this.setContent(content);\n    this.setButtons(buttons);\n    this._destory = false;\n    this.disable = disable || false;\n    this.duration = (duration || 400) / 1000;\n    this.throttle = throttle || 40;\n    this.rebounce = rebounce;\n    this.fullSlide = fullSlide;\n  }\n  setDisable(disable: boolean = true) {\n    if (this._destory) {\n      return;\n    }\n    this.disable = disable;\n  }\n  setRebounce(rebounce: boolean = true) {\n    if (this._destory) {\n      return;\n    }\n    this.rebounce = rebounce;\n  }\n  setDuration(duration: number = 0) {\n    if (this._destory) {\n      return;\n    }\n    this.duration = duration / 1000;\n  }\n  setThrottle(throttle: number = 0) {\n    if (this._destory) {\n      return;\n    }\n    this.throttle = throttle;\n  }\n  setFullSlide(fullSlide: boolean = true) {\n    if (this._destory) {\n      return;\n    }\n    this.fullSlide = fullSlide;\n  }\n  setButtons(buttons?: SlideViewButtonOptions[]) {\n    if (this._destory) {\n      return;\n    }\n    const btnPos: ButtonPosition | null =\n      this._translateX === 0 ? null : this._translateX > 0 ? 'left' : 'right';\n    // 重新设置按钮时应该先收起（因为刚插入的按钮是没有transform的，当然可以根据收起状态来计算，不想计算了）\n    this.hideButton().then(() => {\n      const leftBtnElement = this.element.previousSibling\n        ?.firstChild as HTMLElement;\n      leftBtnElement.innerHTML = '';\n      if (this._agents && !this._agents[1]) {\n        this._agents[1] = agent(leftBtnElement, {\n          press: buttonPress.bind(this),\n        });\n      }\n      const rightBtnElement = this.element.nextSibling\n        ?.firstChild as HTMLElement;\n      rightBtnElement.innerHTML = '';\n      if (this._agents && !this._agents[2]) {\n        this._agents[2] = agent(rightBtnElement, {\n          press: buttonPress.bind(this),\n        });\n      }\n      let leftMax = 0;\n      let rightMax = 0;\n      let lastLeftIndex = -1;\n      let lastRightIndex = -1;\n      this._buttons = (buttons || []).map(\n        (\n          {\n            className,\n            icon,\n            width,\n            height,\n            text,\n            confirmText,\n            color,\n            background,\n            position = 'right',\n            slideOut = true,\n            data,\n          },\n          index,\n        ) => {\n          const btnWrap = addClass(\n            document.createElement('div'),\n            `hjs-slideview__btn__wrap ${className || ''}`,\n          );\n          btnWrap.setAttribute('data-index', String(index));\n          const btn = setStyle(\n            addClass(document.createElement('div'), 'hjs-slideview__btn'),\n            {\n              color,\n              background,\n              width: width || '100%',\n              height: height || '100%',\n              padding: icon ? 0 : '0 16px',\n              margin: icon ? '0 10px' : 0,\n              borderRadius: icon\n                ? !height\n                  ? '50%'\n                  : (typeof height === 'string'\n                      ? parseInt(height, 10)\n                      : height) / 2\n                : 0,\n            },\n          );\n          if (icon) {\n            const { src, className: cls, width: w, height: h } = icon;\n            if (src) {\n              const btnImg = document.createElement('img');\n              btnImg.src = src;\n              if (typeof w === 'string') {\n                btnImg.width = parseInt(w, 10);\n              } else if (typeof w === 'number') {\n                btnImg.width = w;\n              }\n              if (typeof h === 'string') {\n                btnImg.height = parseInt(h, 10);\n              } else if (typeof h === 'number') {\n                btnImg.height = h;\n              }\n              btn.appendChild(addClass(btnImg, cls || ''));\n            } else {\n              btn.appendChild(\n                setStyle(addClass(document.createElement('i'), cls || ''), {\n                  width,\n                  height,\n                }),\n              );\n            }\n          } else {\n            const btnText = document.createElement('span');\n            btnText.innerText = String(text);\n            btn.appendChild(btnText);\n            if (confirmText) {\n              const btnCText = document.createElement('span');\n              btnCText.innerText = String(confirmText);\n              setStyle(btnCText, { display: 'none' });\n              btn.appendChild(btnCText);\n            }\n          }\n          btnWrap.appendChild(btn);\n          if (position === 'left') {\n            leftBtnElement.appendChild(btnWrap);\n          } else {\n            rightBtnElement.appendChild(btnWrap);\n          }\n          const btnWidth = btnWrap.getBoundingClientRect().width;\n          if (position === 'left') {\n            leftMax += btnWidth;\n            lastLeftIndex = index;\n          } else {\n            rightMax += btnWidth;\n            lastRightIndex = index;\n          }\n          return {\n            element: btnWrap,\n            width: btnWidth,\n            position,\n            slideOut,\n            icon: !!icon,\n            confirm: !!confirmText,\n            lastOne: false,\n            data,\n          };\n        },\n      );\n      if (lastLeftIndex !== -1) {\n        this._buttons[lastLeftIndex].lastOne = true;\n      }\n      if (lastRightIndex !== -1) {\n        this._buttons[lastRightIndex].lastOne = true;\n      }\n      this._slideRange = [-rightMax, leftMax];\n      if (btnPos) {\n        this.showButton(btnPos);\n      }\n    });\n  }\n  setContent(content?: HTMLElement | string) {\n    if (this._destory) {\n      return;\n    }\n    let tempChild;\n    if (typeof content === 'string') {\n      tempChild = document.querySelector(content);\n    } else {\n      tempChild = content;\n    }\n    if (tempChild) {\n      this.element.innerHTML = '';\n      this.element.appendChild(tempChild);\n    }\n  }\n  hideButton() {\n    return new Promise<void>((resolve) => {\n      if (this._destory || !this._buttons) {\n        resolve();\n        return;\n      }\n      if (this._translateX === 0 && this._shown) {\n        resolve();\n        this.trigger('hide', {\n          currentTarget: this.element,\n          timeStamp: Date.now(),\n          sourceEvent: null,\n        });\n        this._shown = false;\n        return;\n      }\n      const positive = this._translateX < 0;\n      this._translateX = 0;\n      transform.apply(this, [0, positive, 0]);\n      onOnceTransitionEnd(this.element, () => {\n        resolve(); // 如果当前处于按钮确认状态，隐藏之前需要先取消\n        if (this._confirmIndex !== -1) {\n          cTransform.apply(this, [this._confirmIndex, false]);\n          this._confirmIndex = -1;\n        }\n        if (this._shown) {\n          this.trigger('hide', {\n            currentTarget: this.element,\n            timeStamp: Date.now(),\n            sourceEvent: null,\n          });\n          this._shown = false;\n        }\n      });\n    });\n  }\n  showButton(position?: ButtonPosition) {\n    return new Promise<void>((resolve) => {\n      if (this._destory) {\n        resolve();\n        return;\n      }\n      const [slideMin, slideMax] = this._slideRange || [0, 0];\n      const pos = slideMin === 0 ? 'left' : slideMax === 0 ? 'right' : position;\n      const max = pos === 'left' ? slideMax : slideMin;\n      if (this._translateX === max && !this._shown) {\n        resolve();\n        this.trigger('show', {\n          currentTarget: this.element,\n          timeStamp: Date.now(),\n          sourceEvent: null,\n        });\n        this._shown = true;\n        return;\n      }\n      const show = (rebSize: number = 0) => {\n        const factor = pos === 'left' ? 1 : -1;\n        const moveX = max + rebSize * factor;\n        const positive = moveX > this._translateX;\n        this._translateX = moveX;\n        transform.apply(this, [moveX, positive, 0]);\n        if (!rebSize) {\n          onOnceTransitionEnd(this.element, () => {\n            resolve();\n            if (!this._shown) {\n              this.trigger('show', {\n                currentTarget: this.element,\n                timeStamp: Date.now(),\n                sourceEvent: null,\n              });\n              this._shown = true;\n            }\n          });\n        }\n      };\n      // 设置回弹效果并且已滑动宽度小于最大宽度时才有弹性效果\n      if (this.rebounce && Math.abs(this._translateX) < Math.abs(max)) {\n        show(SlideView.REBOUNCE_SIZE);\n        onOnceTransitionEnd(this.element, () => show());\n      } else {\n        show();\n      }\n    });\n  }\n  toggleButton(position?: ButtonPosition) {\n    if (this._destory) {\n      return;\n    }\n    return this._translateX === 0\n      ? this.showButton(position)\n      : this.hideButton();\n  }\n  destory() {\n    // 解除所有事件\n    super.off();\n    // 销毁底层事件\n    this._agents?.forEach((a) => a && a.destory());\n    this._agents = null;\n    this._destory = true;\n    this._buttons = null;\n    this._slideRange = null;\n    this._startPoint = null;\n    // 删除元素，用户可以在调用该方法之前加一个删除动画\n    const viewEl = this.element.parentNode as HTMLElement;\n    viewEl.parentNode?.removeChild(viewEl);\n  }\n}\n\nexport type ButtonPosition = 'left' | 'right';\n\nexport type SlideViewButtonOptions = {\n  className?: string; // 类名控制样式\n  icon?: {\n    src?: string;\n    className?: string; // 类名控制样式（一般使用字体icon时，可以设置这个）\n    width?: string | number; // 图标宽度\n    height?: string | number; // 图标高度\n  };\n  width?: string | number; // 背景宽度\n  height?: string | number; // 背景高度\n  text?: string | number; // 按钮文本\n  confirmText?: string | number; // 点击时确认文字\n  color?: string; // 按钮文字图标颜色\n  background?: string; //背景颜色\n  position?: ButtonPosition; // 按钮位置\n  slideOut?: boolean; // 按钮点击后是否隐藏按钮\n  data?: any; //按钮携带数据\n};\n\nexport type SlideViewOptions = {\n  container: HTMLElement | string; // 装载滑动删除的DOM容器\n  content?: HTMLElement | string; // 滑动元素的子节点\n  buttons?: SlideViewButtonOptions[]; // 按钮配置\n  className?: string; // 类名控制样式\n  disable?: boolean; // 禁用\n  duration?: number; // 动画时间（毫秒级）\n  throttle?: number; //按钮滑出距离阈值（超过这个阈值时抬起后自动滑出，否则收起）\n  rebounce?: boolean; // 滑出时是否有弹性效果\n  fullSlide?: boolean; // 最后一个按钮覆盖滑动\n};\n\nexport type SlideViewEventType =\n  | 'show'\n  | 'hide'\n  | 'press'\n  | 'longPress'\n  | 'doublePress'\n  | 'buttonPress'\n  | 'buttonConfirm';\n\nexport type SlideViewEvent = {\n  index?: number;\n  data?: any;\n} & IBaseEvent<HTMLElement, AgentEvent | null>;\n\nexport default SlideView;\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-14 16:23:54\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-02-23 15:44:11\n * @Description: ******\n */\nexport default `\n.hjs-slide-view {\n  position: relative;\n  overflow: hidden;\n}\n.hjs-slideview__left {\n  position: absolute;\n  right: 100%;\n  top: 0;\n  height: 100%;\n}\n.hjs-slideview__middle {\n  width: 100%;\n  position: relative;\n  z-index: 10;\n}\n.hjs-slideview__right {\n  position: absolute;\n  left: 100%;\n  top: 0;\n  height: 100%;\n}\n.hjs-slideview__buttons {\n  width: 100%;\n  height: 100%;\n}\n.hjs-slideview__btn__wrap {\n  position: absolute;\n  left: 0;\n  right:auto;\n  bottom: 0;\n  text-align: center;\n  width: auto;\n  height: 100%;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.hjs-slideview__left .hjs-slideview__btn__wrap {\n  left:auto;\n  right: 0;\n}\n.hjs-slideview__btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n`;\n"],"names":["EventTarget","this","events","type","handler","on","onceHandler","args","apply","off","eventPool","push","i","length","splice","event","len","currentTarget","getDistance","x0","y0","x1","y1","Math","sqrt","pow","getAngle","atan2","PI","getCenter","rebounceSize","value","abs","addClass","ele","className","split","forEach","c","classList","add","setStyle","css","Object","keys","k","key","indexOf","replace","toLowerCase","val","String","style","setProperty","styleId","fixOption","defaultValue","minVal","touchstarted","touches","preventDefault","stopImmediatePropagation","t","p","pageX","pageY","touch","identifier","_touch0","_touch1","_preventTap","_swipeTimeStamp","_preventSingleTap","_preventDoubleTap","_longTapTimer","clearTimeout","trigger","element","point","timeStamp","Date","now","sourceEvent","window","setTimeout","waitTime","longTapInterval","_singleTapTimer","_touchFirst","doubleTapDistance","touchmoved","changedTouches","touchMoveDistance","distance1","distance0","scale","angle1","angle0","angle","center1","center0","deltaX","deltaY","touchended","x","y","deltaTime","velocity","swipeVelocity","swipeDistance","direction","delayTime","doubleTapInterval","intervalTime","touchcanceled","scrollcanceled","options","tempElement","document","querySelector","HTMLElement","Error","navigator","maxTouchPoints","started","bind","moved","ended","canceled","addEventListener","scrolled","_destory","removeEventListener","touched","moused","mouse","agent","destory","start","move","end","press","longPress","doublePress","gesture","Gesture","done","e","getAttribute","setAttribute","toString","changedTouch","item","mousedown","mousemoved","mouseupped","dragstarted","capture","passive","clientX","clientY","dx","dy","mousedowned","click","rightclick","dblclick","onOnceTransitionEnd","transitionEnd","transitionEndWrapper","generate","container","tempContainer","createElement","id","appendChild","createTextNode","head","getElementsByTagName","view","leftElement","rightElement","innerHTML","cTransform","index","confirm","rebSize","duration","_buttons","_translateX","leftTransformTotal","rightTransformTotal","btnEl","width","position","slideOut","factor","btnChild","firstChild","display","lastChild","transformx","transform","transition","moveX","positive","status","_slideRange","slideMin","slideMax","lastOne","icon","transformb","disable","_isMoving","_startTX","_startPoint","_slideAngle","_slideStatus","_timeStamp","slideX","fullSlide","elWidth","getBoundingClientRect","threshold","max","MouseEvent","rebounce","min","_confirmIndex","findIndex","buttonSlide","throttle","hideButton","showButton","buttonPress","target","parentNode","data","SlideView","REBOUNCE_SIZE","content","buttons","_agents","setContent","setButtons","btnPos","then","leftBtnElement","previousSibling","rightBtnElement","nextSibling","leftMax","rightMax","lastLeftIndex","lastRightIndex","map","height","text","confirmText","color","background","btnWrap","btn","padding","margin","borderRadius","parseInt","src","cls","w","h","btnImg","btnText","innerText","btnCText","btnWidth","tempChild","Promise","resolve","_shown","pos","show","a","viewEl","removeChild"],"sourceRoot":""}